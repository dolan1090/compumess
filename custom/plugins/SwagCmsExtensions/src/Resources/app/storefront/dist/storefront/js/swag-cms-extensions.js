"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["swag-cms-extensions"],{6309:(t,e,i)=>{i(4432);var s=i(2005),r=i(6285),n=i(378),o=i(9068),a=i(8254),l=i(3206),c=i(5944),d=i(1661);const u={RENDER_RESPONSE:"SwagCmsExtensionsCrossSellingPluginRenderResponse"};class h extends d.Z{_rebuildCrossSellingSlider(t){super._rebuildCrossSellingSlider(t),this.$emitter.publish(u.RENDER_RESPONSE)}}var g=i(3139);const p={RENDER_RESPONSE:"SwagCmsExtensionsListingPluginRenderResponse"};class m extends g.Z{renderResponse(t){super.renderResponse(t),this.$emitter.publish(p.RENDER_RESPONSE)}}var v=i(3832),_=i(4690);function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var s=f(t,e);if(s){var r=Object.getOwnPropertyDescriptor(s,e);return r.get?r.get.call(arguments.length<3?t:i):r.value}},b.apply(this,arguments)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}const w={VARIANT_SWITCHED:"SwagCmsExtensionsVariantSwitchPluginVariantSwitched"};class y extends v.Z{_onChange(t){const e=`[data-swag-cms-extensions-quickview-carousel-product-id="${this.options.listingProductId}"]`;if(this._contains(this.el,e)){const i=document.querySelector(`${e} .product-detail-buy`).firstElementChild;_.Z.create(i),this._emitVariantSwitchEvent(t,this.$emitter)}else super._onChange(t)}_emitVariantSwitchEvent(t,e){e.publish(w.VARIANT_SWITCHED,{parentId:this.options.parentId,listingProductId:this.options.listingProductId,switched:this._getSwitchedOptionId(t.target),options:JSON.stringify(this._getFormValue())})}_contains(t,e){return[...document.querySelectorAll(e)].map((e=>e.contains(t))).reduce(((t,e)=>!!t||e),!1)}}var E,P,L;E=y,P="options",L={parentId:"",listingProductId:"",...b(S(y),"options",y)},(P=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(P))in E?Object.defineProperty(E,P,{value:L,enumerable:!0,configurable:!0,writable:!0}):E[P]=L;var C=i(7906);class I extends C.Z{static getTemplate(){return`\n            <div class="container quickview-loading-indicator">\n                ${super.getTemplate()}\n            </div>\n        `}}class F{constructor(t,e,i){this._id=t,this._variantId=null,this._loaded=e,this._quickview=i,this._variants=new Map}get id(){return this._id}get variantId(){return this._variantId}get loaded(){return this._loaded}get quickview(){return this._quickview}get variants(){return this._variants}set variantId(t){this._variantId=t}set loaded(t){this._loaded=t}set quickview(t){this._quickview=t}}const k="swag-cms-extensions-quickview-carousel",T="carousel-item",O="data-swag-cms-extensions-quickview-carousel-product-id";class R{constructor(t,e,i=k,s=O){this._arrowHeadLeft=t,this._arrowHeadRight=e,this._id=i,this._carouselItemProductIdAttribute=s}create(t){return`\n            <div id="${this._id}" class="carousel slide" data-interval="0">\n                <div class="carousel-inner">\n                    ${t.join("")}\n                </div>\n                ${this._createNavigationElement("prev")}\n                ${this._createNavigationElement("next")}\n            </div>\n        `}createItem(t,e,i=!1){return`\n            <div class="${T} ${i?"active":""}"\n                ${this._carouselItemProductIdAttribute}="${e}">\n                ${t}\n            </div>\n        `}_createNavigationElement(t){const e="prev"===t;return`\n            <a class="carousel-control-${t}" href="#${this._id}" role="button" data-bs-slide=${t}>\n                ${e?this._arrowHeadLeft:this._arrowHeadRight}\n                <span class="visually-hidden">${e?"Previous":"Next"}</span>\n            </a>\n        `}}const x={INITIALISED:"SwagCmsExtensions/quickviewInitialised",PRODUCT_REGISTERED:"SwagCmsExtensions/productRegistered",EVENTS_REGISTERED:"SwagCmsExtensions/eventsRegistered",MODAL_OPENED:"SwagCmsExtensions/modalOpened",PRODUCT_UPDATED:"SwagCmsExtensions/quickviewProductUpdated",BUY_FORM_BEFORE_SUBMIT:"beforeFormSubmit",BS_CAROUSEL_SLIDE:"slide.bs.carousel"};class q extends r.Z{init(){this._firstLoad=!1,this._currentProductId="",this._pseudoModal=null,this._scrollPos=0,this._products=new Map,this._isModalLoading=!1,this._client=new a.Z(window.accessKey,window.contextToken),this._carouselTemplateUtil=new R(this.options.arrowHeadLeft,this.options.arrowHeadRight),this._registerEventListeners(),this._registerProducts(),this.$emitter.publish(x.INITIALISED,this)}_reInitialise(){this._products.clear(),this._registerProductBoxListeners(),this._registerProducts()}_registerProducts(){const t=this._getProductBoxes(this.el.parentNode);return t?(t.forEach((t=>this._registerProduct(this._getProductBoxDataset(t).productId))),!0):t}_registerProduct(t){this._products.set(t,new F(t,!1,I.getTemplate())),this.$emitter.publish(x.PRODUCT_REGISTERED,t)}_registerEventListeners(){this._registerProductBoxListeners(),this._registerListingListener(),this._registerCrossSellingListener()}_registerProductBoxListeners(){const t=this._getProductBoxes(this.el.parentNode);return t?(t.forEach(this._registerLinkClickListeners.bind(this)),!0):t}_registerCrossSellingListener(){this._addEventListener(u.RENDER_RESPONSE,this._reInitialise,l.Z.querySelector(document,this.options.crossSellingSelector,!1))}_registerListingListener(){this._addEventListener(p.RENDER_RESPONSE,this._reInitialise,l.Z.querySelector(document,this.options.listingSelector,!1))}_getProductBoxes(t){const e=l.Z.querySelectorAll(t,this.options.productBoxSelector,!1);return e?this.options.isSearchPage?e:[...e].filter((t=>this._getProductBoxDataset(t).sectionId===this.options.sectionId)):e}_getProductBoxDataset(t){return JSON.parse(t.dataset.swagCmsExtensionsQuickviewBoxOptions)}_registerLinkClickListeners(t){const e=this._onProductBoxLinkClick.bind(this,{productId:this._getProductBoxDataset(t).productId});l.Z.querySelectorAll(t,this.options.productBoxLinkSelector).forEach((t=>{this._addEventListener("click",e,t)}))}_onProductBoxLinkClick(t,e){e.preventDefault(),this._openModal(t)}_openModal({productId:t}){this._isModalLoading||(this._isModalLoading=!0,this._firstLoad=!0,this._currentProductId=t,this._pseudoModal=new n.Z(this._carouselTemplateUtil.create([this._carouselTemplateUtil.createItem(I.getTemplate(),"",!0)])),this._pseudoModal.open(this._fetchWindow.bind(this,t)),this._addPluginClasses(this._pseudoModal),this.$emitter.publish(x.MODAL_OPENED,this))}_addPluginClasses(t){t.getModal().classList.add(this.options.modalClass),l.Z.querySelector(t.getModal(),".modal-dialog").classList.add("modal-dialog-centered","modal-xl"),l.Z.querySelector(t.getModal(),".modal-header").remove()}_fetchWindow(t){const e=this._getSibling(t,-1,this._products),i=this._getSibling(t,1,this._products);this._updateProductQuickview(e),this._updateProductQuickview(t),this._updateProductQuickview(i)}_updateProductQuickview(t){this._fetchQuickview(t,this._setProductQuickview.bind(this,t))}_fetchQuickview(t,e){this._products.get(t).loaded?e(this._products.get(t).quickview):this._client.get(`${window.router[this.options.quickviewControllerRoute]}/${t}`,e.bind(this))}_fetchVariantQuickview(t,e,i){const s=window.router[this.options.quickviewControllerVariantRoute];this._client.get(`${s}/${t}?${c.stringify(e)}`,i.bind(this))}_setProductQuickview(t,e){this._products.get(t).loaded=!0,this._products.get(t).quickview=e,this._syncProductsAndDom(t)}_setVariantQuickview(t,e,i){const s=this._products.get(t),r=new F(e,!1,i);s.variants.set(r.id,r),s.variantId=r.id,this._syncProductsAndDom(t)}_syncProductsAndDom(t){if(this._firstLoad){const t=[];this._products.forEach((e=>{t.push(this._carouselTemplateUtil.createItem(e.quickview,e.id,e.id===this._currentProductId))})),this._pseudoModal.updateContent(this._carouselTemplateUtil.create(t)),this._registerCarouselListener(),this._firstLoad=!1}const e=this._products.get(t),i=e.variantId;this._updateCarouselItemContent(t,i?e.variants.get(i).quickview:e.quickview),this._isModalLoading=!1}_registerBuyFormListener(t){this._addEventListener(x.BUY_FORM_BEFORE_SUBMIT,this._pseudoModal.close.bind(this._pseudoModal),l.Z.querySelector(t,this.options.addToCartSelector))}_registerTaxLinkListener(t){this._addEventListener("click",this._onTaxLinkClick,l.Z.querySelector(t,this.options.taxLinkSelector))}_registerVariantSwitchListener(t){this._addEventListener(w.VARIANT_SWITCHED,this._onVariantSwitch,l.Z.querySelector(t,this.options.variantSwitchSelector,!1))}_registerCarouselListener(){l.Z.querySelector(document,`#${k}`,!1).addEventListener(x.BS_CAROUSEL_SLIDE,this._onCarouselSlide.bind(this))}_onCarouselSlide(t){const e="left"===t.direction?-1:1,i=t.relatedTarget.dataset.swagCmsExtensionsQuickviewCarouselProductId,s=this._getSibling(i,e,this._products);this._fetchWindow(i),this._currentProductId=s}_updateCarouselItemContent(t,e){const i=this._getCarouselItem(t,this._pseudoModal.getModal());i&&(i.innerHTML=e,o.Z.initializePlugins(),this._registerBuyFormListener(i),this._registerVariantSwitchListener(i),this._registerTaxLinkListener(i),this._scrollPos>0&&(this._setContainerScrollPosition(t,this._scrollPos),this._scrollPos=0))}_getCarouselItem(t,e){return l.Z.querySelector(e,`[${O}="${t}"]`,!1)}_onVariantSwitch(t){const e=t.detail.listingProductId,i={switched:t.detail.switched,options:t.detail.options,parentId:t.detail.parentId},s=this._setVariantQuickview.bind(this,e,this._joinValues(JSON.parse(i.options)));this._scrollPos=this._getContainerScrollPosition(e),this._fetchVariantQuickview(e,i,s)}_onTaxLinkClick(t){t.preventDefault(),this._client.get(t.target.dataset.url,(t=>{this._pseudoModal.close(),new n.Z(t).open()}))}_addEventListener(t,e,i){const r=e.bind(this);i&&(i.$emitter||new s.Z(i),this._listenerPresent(i,t,r)||i.$emitter.subscribe(t,r))}_listenerPresent(t,e,i=null){return!!t.$emitter&&t.$emitter.listeners.some((t=>t.splitEventName[0]===e&&function(t){return null===i||t.cb===i}(t)))}_setContainerScrollPosition(t,e){l.Z.querySelector(this._getCarouselItem(t,this._pseudoModal.getModal()),this.options.quickviewContainerSelector).scrollTop=e}_getContainerScrollPosition(t){return l.Z.querySelector(this._getCarouselItem(t,this._pseudoModal.getModal()),this.options.quickviewContainerSelector).scrollTop}_joinValues(t){return Object.keys(t).map((e=>t[e])).join("")}_getSibling(t,e,i){const s=[...i.values()],r=s.findIndex((e=>e.id===t));if(r<0)return null;let n=(e>0?r+1:r-1)%s.length;return n<0&&(n=s.length-1),s[n].id}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(q,"options",{isSearchPage:!1,crossSellingSelector:"[data-cross-selling]",listingSelector:"[data-listing]",variantSwitchSelector:"[data-variant-switch]",addToCartSelector:"[data-add-to-cart]",taxLinkSelector:"a.product-detail-tax-link",productBoxSelector:"[data-swag-cms-extensions-quickview-box]",productBoxLinkSelector:["a.product-name","a.product-image-link",".swag-cms-extensions-quickview-listing-button-detail a.btn"].join(", "),quickviewContainerSelector:".swag-cms-extensions-quickview-container",modalClass:"swag-cms-extensions-quickview-modal",quickviewControllerRoute:"widgets.swag.cmsExtensions.quickview",quickviewControllerVariantRoute:"widgets.swag.cmsExtensions.quickview.variant",sectionId:"",arrowHeadLeft:"",arrowHeadRight:""});var A,Z=i(1966);class $ extends r.Z{init(){if(!1===this._isFormElement())throw Error("Element is not of type <form>");this._setNoValidate(),this._registerEvents()}_isFormElement(){return"form"===this.el.tagName.toLowerCase()}_setNoValidate(){this.el.setAttribute("novalidate","")}_registerEvents(){this.el.addEventListener("submit",this._onFormSubmit.bind(this)),this._registerValidationListener(this._onValidate.bind(this),["change","input"])}_registerValidationListener(t,e){const i=l.Z.querySelectorAll(this.el,`[${this.options.messageAttr}]`,!1);i&&Z.Z.iterate(i,(i=>{Z.Z.iterate(e,(e=>{i.removeEventListener(e,t),i.addEventListener(e,t)}))}))}_onFormSubmit(t){const e=this.el.checkValidity();!1===e&&(t.preventDefault(),t.stopPropagation());const i=this.el.querySelectorAll(`[${this.options.messageAttr}]`);Z.Z.iterate(i,(t=>{this._resetInvalidMessage(t)})),this.el.classList.add(this.options.styleClass),this.$emitter.publish("onFormSubmit",{validity:e}),this.$emitter.publish("beforeSubmit")}_onValidate(t){this._resetInvalidMessage(t.target)}_resetInvalidMessage(t){const e=t.parentElement;let i=l.Z.getDataAttribute(t,this.options.messageAttr,!1);if(t.checkValidity())return i=l.Z.querySelector(e,".js-validation-message",!1),void(i&&i.remove());i&&!e.querySelector(".js-validation-message")&&e.insertAdjacentHTML("beforeEnd",`<div class="invalid-feedback js-validation-message">${i}</div>`)}}function j(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}($,"options",{styleClass:"was-validated",messageAttr:"data-form-validation-error-message"});class D{constructor(t,e=1,i=!1){let s=D.easing;!0===i&&(s=s.bouncy),this.easingFunction=s[t],this.degree="linear"!==t?e:1}scrollIntoView(t,e){if(!e||e<=0)return new Promise((t=>{t()}));const i=document.documentElement,s="object"==typeof i.scrollTop?i.scrollTop.offsetTop:i.scrollTop,r="object"==typeof t?t.offsetTop:t;return this.scrollTo(i,s,r,0,1/e,20,this.easingFunction,this.degree),new Promise((t=>{D.currentIteration+=1,window.setTimeout(t,e,D.currentIteration)}))}scrollTo(t,e,i,s,r,n,o,a){s<0||s>1||r<=0?t.scrollTop=i:(window.clearTimeout(D.currentTimeout),o?(t.scrollTop=e-(e-i)*o(s,a),s+=r*n,D.currentTimeout=window.setTimeout((()=>{this.scrollTo(t,e,i,s,r,n,o,a)}),n)):t.scrollTop=i)}static easeInPower(t,e){return t**e}static easeOutPower(t,e){return 1-(t-=1)**e*(-1)**e}static easeInOutPower(t,e){return(t*=2)<1?t**e/2:(2-(t-=2)**e*(-1)**e)/2}static easeInBouncy(t){const e=1.70158;return 2.70158*t**3-e*t**2}static easeOutBouncy(t){const e=1.70158;return 1+2.70158*(t-1)**3+e*(t-1)**2}static easeInOutBouncy(t){const e=2.5949095;return t<.5?(2*t)**2*(7.189819*t-e)/2:((2*t-2)**2*((e+1)*(2*t-2)+e)+2)/2}}j(D,"currentTimeout",void 0),j(D,"currentIteration",0),j(D,"easing",{none:null,linear:D.easeInPower,in:D.easeInPower,out:D.easeOutPower,inOut:D.easeInOutPower,bouncy:{linear:D.easeInPower,in:D.easeInBouncy,out:D.easeOutBouncy,inOut:D.easeInOutBouncy}});class N extends r.Z{init(){this.sidebar=this.el;const t=l.Z.querySelectorAll(document,this.options.anchoredSectionsSelector);this.anchoredSections=t,this.navigationList=l.Z.querySelector(this.sidebar,this.options.navigationListSelector),this.smoothScrollingEnabled=this.options.pageSettings&&this.options.pageSettings.active,this.enableSmoothScrolling(this.navigationList),this.registerObserver(t)}enableSmoothScrolling(t){this.smoothScrollingEnabled?this.scrollHelper=new D(this.options.pageSettings.easing,this.options.pageSettings.easingDegree,this.options.pageSettings.bouncy):this.scrollHelper=new D("none");l.Z.querySelectorAll(t,this.options.entrySelector).forEach((t=>{t.addEventListener("click",this.onClickScrollSmoothly.bind(this))}))}registerObserver(t){const e=new IntersectionObserver(this.onIntersection.bind(this),this.options.observerOptions),i=Array.from(t);return!(!i||i.length<=0)&&(i.forEach((t=>{e.observe(t)})),!0)}onClickScrollSmoothly(t){t.preventDefault();const e=t.target,i=this.options.entrySelector.substring(1);if(![e,e.parentNode].some((t=>t.classList.contains(i))))return!1;const s=void 0!==e.hash?e.hash:e.parentNode.hash;return this.performSmoothScrolling(s),!0}performSmoothScrolling(t){const e=l.Z.querySelector(document,t);let i=1;this.smoothScrollingEnabled&&(i=this.options.pageSettings.duration),this.scrollHelper.scrollIntoView(e,i).then((e=>{e===D.currentIteration&&(window.location.hash=t)}))}onIntersection(t){const e=t.find((t=>t.isIntersecting));if(!e||!e.target)return!1;const i=e.target;return this.setActiveNavigationItem(i)}setActiveNavigationItem(t){const e=Array.from(l.Z.querySelectorAll(this.navigationList,this.options.entrySelector));if(!e||e.length<=0)return!1;e.forEach((t=>{t.classList.remove(this.options.activeEntryClass)}));const i=l.Z.querySelector(t,this.options.navigationAnchorSelector).id;return l.Z.querySelector(this.navigationList,`[href="#${i}"]${this.options.entrySelector}`).classList.add(this.options.activeEntryClass),this.setUpDownNavigation(t),!0}setUpDownNavigation(t){if(this.anchoredSections.length<=0)return!1;const e=l.Z.querySelector(t,this.options.navigationAnchorSelector),i=Array.from(this.anchoredSections).findIndex((t=>l.Z.querySelector(t,this.options.navigationAnchorSelector).id===e.id));if(i<0)return!1;const s=l.Z.querySelector(this.sidebar,this.options.mobileUpButtonSelector),r=l.Z.querySelector(this.sidebar,this.options.mobileDownButtonSelector),n=`#${this.getPreviousSectionId(i)}`,o=`#${this.getNextSectionId(i)}`;return s.addEventListener("click",this.performSmoothScrolling.bind(this,n)),r.addEventListener("click",this.performSmoothScrolling.bind(this,o)),!0}getPreviousSectionId(t){const e=Math.max(0,t-1);return this.getSectionIdByIndex(e)}getNextSectionId(t){const e=Math.min(this.anchoredSections.length-1,t+1);return this.getSectionIdByIndex(e)}getSectionIdByIndex(t){return l.Z.querySelector(this.anchoredSections[t],this.options.navigationAnchorSelector).id}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(N,"options",{navigationListSelector:".scroll-navigation-sidebar-list",anchoredSectionsSelector:".swag-cms-extensions-scroll-navigation-wrapper",navigationAnchorSelector:".scroll-navigation-anchor",entrySelector:".scroll-navigation-sidebar-entry",activeEntryClass:"scroll-navigation-sidebar-entry--active",mobileListButtonSelector:"#scroll-navigation-mobile-button-list",mobileUpButtonSelector:"#scroll-navigation-mobile-button-up",mobileDownButtonSelector:"#scroll-navigation-mobile-button-down",observerOptions:{rootMargin:"-10% 0% -60% 0%"},pageSettings:{}});class B extends r.Z{init(){this.sidebar=this.el;const t=l.Z.querySelectorAll(this.sidebar,this.options.toggleSwitchSelector);null!==t&&t.forEach((t=>{t.onclick=this.toggleVisibility.bind(this)}))}toggleVisibility(){this.sidebar.classList.contains(this.options.visibleClass)?this.sidebar.classList.remove(this.options.visibleClass):this.sidebar.classList.add(this.options.visibleClass)}}!function(t,e,i){(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(B,"options",{toggleSwitchSelector:".scroll-navigation-menu-toggle",visibleClass:"list--visible"}),(A=window.PluginManager).register("SwagCmsExtensionsQuickview",q,'[data-swag-cms-extensions-quickview="true"]'),A.register("SwagCmsExtensionsScrollNavigation",N,'[data-swag-cms-extensions-scroll-navigation="true"]'),A.register("SwagCmsExtensionsScrollNavigationToggleMenu",B,'[data-swag-cms-extensions-scroll-navigation-toggle-menu="true"]'),A.register("SwagCmsExtensionsFormValidation",$,'[data-swag-cms-extensions-form-validation="true"]'),function(t){t.override("CrossSelling",h,"[data-cross-selling]"),t.override("Listing",m,"[data-listing]"),t.override("VariantSwitch",y,"[data-variant-switch]")}(window.PluginManager)},1661:(t,e,i)=>{i.d(e,{Z:()=>c});var s,r,n,o=i(6285),a=i(3206),l=i(7474);class c extends o.Z{init(){this._registerEvents()}_registerEvents(){a.Z.querySelectorAll(this.el,this.options.tabSelector).forEach((t=>{t.addEventListener("shown.bs.tab",this._rebuildCrossSellingSlider.bind(this))}))}_rebuildCrossSellingSlider(t){if(!t.target.hasAttribute("id"))return;const e=t.target.id,i=a.Z.querySelector(document,`#${e}-pane`),s=a.Z.querySelector(i,this.options.productSliderSelector,!1);if(!1===s)return;window.PluginManager.getPluginInstanceFromElement(s,"ProductSlider").rebuild(l.Z.getCurrentViewport(),!0)}}s=c,n={tabSelector:'a[data-bs-toggle="tab"]',productSliderSelector:'[data-product-slider="true"]'},(r=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(r="options"))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n},3139:(t,e,i)=>{i.d(e,{Z:()=>p});var s,r,n,o=i(6285),a=i(8254),l=i(1966),c=i(3206),d=i(5944),u=i(5362),h=i(6510),g=i(46);class p extends o.Z{init(){this._registry=[],this.httpClient=new a.Z,this._urlFilterParams=d.parse(h.Z.getSearch()),this._filterPanel=c.Z.querySelector(document,this.options.filterPanelSelector,!1),this._filterPanelActive=!!this._filterPanel,this._filterPanelActive&&(this._showResetAll=!1,this.activeFilterContainer=c.Z.querySelector(document,this.options.activeFilterContainerSelector)),this._cmsProductListingWrapper=c.Z.querySelector(document,this.options.cmsProductListingWrapperSelector,!1),this._cmsProductListingWrapperActive=!!this._cmsProductListingWrapper,this._allFiltersInitializedDebounce=g.Z.debounce(this.sendDisabledFiltersRequest.bind(this),100),this._registerEvents()}refreshRegistry(){const t=this._registry.filter((t=>document.body.contains(t.el)));this.init(),this._registry=t,window.PluginManager.initializePlugins()}changeListing(t=!0,e={}){this._buildRequest(t,e),this._filterPanelActive&&this._buildLabels()}registerFilter(t){this._registry.push(t),this._setFilterState(t),this.options.disableEmptyFilter&&this._allFiltersInitializedDebounce()}_setFilterState(t){if(Object.keys(this._urlFilterParams).length>0&&"function"==typeof t.setValuesFromUrl){if(!t.setValuesFromUrl(this._urlFilterParams)||!this._filterPanelActive)return;this._showResetAll=!0,this._buildLabels()}}deregisterFilter(t){this._registry=this._registry.filter((e=>e!==t))}_fetchValuesOfRegisteredFilters(){const t={};return this._registry.forEach((e=>{const i=e.getValues();Object.keys(i).forEach((e=>{Object.prototype.hasOwnProperty.call(t,e)?Object.values(i[e]).forEach((i=>{t[e].push(i)})):t[e]=i[e]}))})),t}_mapFilters(t){const e={};return Object.keys(t).forEach((i=>{let s=t[i];Array.isArray(s)&&(s=s.join("|"));`${s}`.length&&(e[i]=s)})),e}_buildRequest(t=!0,e={}){const i=this._fetchValuesOfRegisteredFilters(),s=this._mapFilters(i);this._filterPanelActive&&(this._showResetAll=!!Object.keys(s).length),this.options.params&&Object.keys(this.options.params).forEach((t=>{s[t]=this.options.params[t]})),Object.entries(e).forEach((([t,e])=>{s[t]=e}));let r=d.stringify(s);this.sendDataRequest(r),delete s.slots,delete s["no-aggregations"],delete s["reduce-aggregations"],delete s["only-aggregations"],r=d.stringify(s),t&&this._updateHistory(r),this.options.scrollTopListingWrapper&&this._scrollTopOfListing()}_scrollTopOfListing(){const t=this._cmsProductListingWrapper.getBoundingClientRect();if(t.top>=0)return;const e=t.top+window.scrollY-this.options.scrollOffset;window.scrollTo({top:e,behavior:"smooth"})}_getDisabledFiltersParamsFromParams(t){const e=Object.assign({},{"only-aggregations":1,"reduce-aggregations":1},t);return delete e.p,delete e.order,delete e["no-aggregations"],e}_updateHistory(t){h.Z.push(h.Z.getLocation().pathname,t,{})}_buildLabels(){let t="";this._registry.forEach((e=>{const i=e.getLabels();i.length&&i.forEach((e=>{t+=this.getLabelTemplate(e)}))})),this.activeFilterContainer.innerHTML=t;const e=c.Z.querySelectorAll(this.activeFilterContainer,`.${this.options.activeFilterLabelRemoveClass}`,!1);t.length&&(this._registerLabelEvents(e),this.createResetAllButton())}_registerLabelEvents(t){l.Z.iterate(t,(t=>{t.addEventListener("click",(()=>this.resetFilter(t)))}))}createResetAllButton(){this.activeFilterContainer.insertAdjacentHTML("beforeend",this.getResetAllButtonTemplate());const t=c.Z.querySelector(this.activeFilterContainer,this.options.resetAllFilterButtonSelector);t.removeEventListener("click",this.resetAllFilter.bind(this)),t.addEventListener("click",this.resetAllFilter.bind(this)),this._showResetAll||t.remove()}resetFilter(t){this._registry.forEach((e=>{e.reset(t.dataset.id)})),this._buildRequest(),this._buildLabels()}resetAllFilter(){this._registry.forEach((t=>{t.resetAll()})),this._buildRequest(),this._buildLabels()}getLabelTemplate(t){return`\n        <span class="${this.options.activeFilterLabelClass}">\n            ${this.getLabelPreviewTemplate(t)}\n            ${t.label}\n            <button class="${this.options.activeFilterLabelRemoveClass}"\n                    data-id="${t.id}">\n                &times;\n            </button>\n        </span>\n        `}getLabelPreviewTemplate(t){const e=this.options.activeFilterLabelPreviewClass;return t.previewHex?`\n                <span class="${e}" style="background-color: ${t.previewHex};"></span>\n            `:t.previewImageUrl?`\n                <span class="${e}" style="background-image: url('${t.previewImageUrl}');"></span>\n            `:""}getResetAllButtonTemplate(){return`\n        <button class="${this.options.resetAllFilterButtonClasses}">\n            ${this.options.snippets.resetAllButtonText}\n        </button>\n        `}addLoadingIndicatorClass(){this._filterPanel.classList.add(this.options.loadingIndicatorClass)}removeLoadingIndicatorClass(){this._filterPanel.classList.remove(this.options.loadingIndicatorClass)}addLoadingElementLoaderClass(){this._cmsProductListingWrapper.classList.add(this.options.loadingElementLoaderClass)}removeLoadingElementLoaderClass(){this._cmsProductListingWrapper.classList.remove(this.options.loadingElementLoaderClass)}sendDataRequest(t){this._filterPanelActive&&this.addLoadingIndicatorClass(),this._cmsProductListingWrapperActive&&this.addLoadingElementLoaderClass(),this.options.disableEmptyFilter&&this.sendDisabledFiltersRequest(),this.httpClient.get(`${this.options.dataUrl}?${t}`,(t=>{this.renderResponse(t),this._filterPanelActive&&this.removeLoadingIndicatorClass(),this._cmsProductListingWrapperActive&&this.removeLoadingElementLoaderClass()}))}sendDisabledFiltersRequest(){const t=this._fetchValuesOfRegisteredFilters(),e=this._mapFilters(t);this.options.params&&Object.keys(this.options.params).forEach((t=>{e[t]=this.options.params[t]})),this._allFiltersInitializedDebounce=()=>{};const i=this._getDisabledFiltersParamsFromParams(e);this.httpClient.get(`${this.options.filterUrl}?${d.stringify(i)}`,(t=>{const e=JSON.parse(t);this._registry.forEach((t=>{"function"==typeof t.refreshDisabledState&&t.refreshDisabledState(e,i)}))}))}renderResponse(t){u.Z.replaceFromMarkup(t,this.options.cmsProductListingSelector,!1),this._registry.forEach((t=>{"function"==typeof t.afterContentChange&&t.afterContentChange()})),window.PluginManager.initializePlugins(),this.$emitter.publish("Listing/afterRenderResponse",{response:t})}_registerEvents(){window.onpopstate=this._onWindowPopstate.bind(this)}_onWindowPopstate(){this.refreshRegistry(),this._registry.forEach((t=>{0===Object.keys(this._urlFilterParams).length&&(this._urlFilterParams.p=1),this._setFilterState(t)})),this.options.disableEmptyFilter&&this._allFiltersInitializedDebounce(),this.changeListing(!1)}}s=p,n={dataUrl:"",filterUrl:"",params:{},filterPanelSelector:".filter-panel",cmsProductListingSelector:".cms-element-product-listing",cmsProductListingWrapperSelector:".cms-element-product-listing-wrapper",activeFilterContainerSelector:".filter-panel-active-container",activeFilterLabelClass:"filter-active",activeFilterLabelRemoveClass:"filter-active-remove",activeFilterLabelPreviewClass:"filter-active-preview",resetAllFilterButtonClasses:"filter-reset-all btn btn-sm btn-outline-danger",resetAllFilterButtonSelector:".filter-reset-all",loadingIndicatorClass:"is-loading",loadingElementLoaderClass:"has-element-loader",disableEmptyFilter:!1,snippets:{resetAllButtonText:"Reset all"},scrollTopListingWrapper:!0,scrollOffset:15},(r=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(r="options"))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n},3832:(t,e,i)=>{i.d(e,{Z:()=>h});var s,r,n,o=i(6285),a=i(5659),l=i(3206),c=i(1966),d=i(8254),u=i(5944);class h extends o.Z{init(){this._httpClient=new d.Z,this._radioFields=l.Z.querySelectorAll(this.el,this.options.radioFieldSelector,!1),this._selectFields=l.Z.querySelectorAll(this.el,this.options.selectFieldSelector,!1),this._elementId=this.options.elementId,this._pageType=this.options.pageType,this._ensureFormElement(),this._preserveCurrentValues(),this._registerEvents()}_ensureFormElement(){if("form"!==this.el.nodeName.toLowerCase())throw new Error("This plugin can only be applied on a form element!")}_preserveCurrentValues(){this._radioFields&&c.Z.iterate(this._radioFields,(t=>{h._isFieldSerializable(t)&&t.dataset&&(t.dataset.variantSwitchValue=t.value)}))}_registerEvents(){this.el.addEventListener("change",(t=>this._onChange(t)))}_onChange(t){const e=this._getSwitchedOptionId(t.target),i=this._getFormValue();this._preserveCurrentValues(),this.$emitter.publish("onChange");const s={switched:e,options:JSON.stringify(i)};if(this._elementId&&"product_detail"!==this._pageType){const t=this.options.url+"?"+u.stringify({...s,elementId:this._elementId});document.$emitter.publish("updateBuyWidget",{url:t,elementId:this._elementId})}else this._redirectToVariant(s)}_getSwitchedOptionId(t){return!!h._isFieldSerializable(t)&&t.name}_getFormValue(){const t={};return this._radioFields&&c.Z.iterate(this._radioFields,(e=>{h._isFieldSerializable(e)&&e.checked&&(t[e.name]=e.value)})),this._selectFields&&c.Z.iterate(this._selectFields,(e=>{if(h._isFieldSerializable(e)){const i=[...e.options].find((t=>t.selected));t[e.name]=i.value}})),t}static _isFieldSerializable(t){return!t.name||t.disabled||-1===["file","reset","submit","button"].indexOf(t.type)}_disableFields(){c.Z.iterate(this._radioFields,(t=>{t.classList&&t.classList.add("disabled","disabled")}))}_redirectToVariant(t){a.Z.create();const e=this.options.url+"?"+u.stringify(t);this._httpClient.get(`${e}`,(t=>{const e=JSON.parse(t);window.location.replace(e.url)}))}}s=h,n={url:"",elementId:"",pageType:"",radioFieldSelector:".product-detail-configurator-option-input",selectFieldSelector:".product-detail-configurator-select-input"},(r=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(r="options"))in s?Object.defineProperty(s,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[r]=n}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=6309,t(t.s=e);var e}));t.O()}]);