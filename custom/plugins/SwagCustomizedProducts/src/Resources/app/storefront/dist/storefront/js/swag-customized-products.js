(self.webpackChunk=self.webpackChunk||[]).push([["swag-customized-products"],{9271:(e,t,i)=>{var o={"./exclusion-list-type-checkbox.js":9014,"./exclusion-list-type-colorselect.js":9319,"./exclusion-list-type-datetime-timestamp.js":2825,"./exclusion-list-type-default.js":6666,"./exclusion-list-type-htmleditor.js":4571,"./exclusion-list-type-numberfield.js":3161,"./exclusion-list-type-upload.js":2516};function s(e){var t=r(e);return i(t)}function r(e){if(!i.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}s.keys=function(){return Object.keys(o)},s.resolve=r,e.exports=s,s.id=9271},4939:(e,t,i)=>{"use strict";i(4308);var o,s,r,n=i(6285),a=i(3206);class l extends n.Z{init(){this.configurator=this.el,this.optionElements=a.Z.querySelectorAll(this.configurator,this.options.collapsingElementsSelector),this.currentClickPromise=null;a.Z.querySelectorAll(this.configurator,this.options.inputFieldsSelector).forEach((e=>{e.addEventListener("focus",this.onInputBlur.bind(this)),e.addEventListener("blur",this.onInputClick.bind(this))}))}onInputBlur(e){null!==this.currentClickPromise&&this.currentClickPromise.then((()=>{this.collapseValid(e)}))}onInputClick(e){this.updateLastEventOption(e)}collapseValid(e){const t=e.target.closest(this.options.collapsingElementsSelector);this.lastEventOption!==t&&this.optionElements.forEach((e=>{const t=a.Z.querySelectorAll(e,this.options.inputFieldsSelector);Array.from(t).some((e=>e.validity.valid))&&e===this.lastEventOption&&bootstrap.Collapse.getOrCreateInstance(e).hide()}))}updateLastEventOption(e){this.currentClickPromise=new Promise((t=>{this.lastEventOption=e.target.closest(this.options.collapsingElementsSelector),t()}))}}o=l,r={collapsingElementsSelector:".collapsingCustomizedProductsOption",inputFieldsSelector:"input, textarea"},(s=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(s="options"))in o?Object.defineProperty(o,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[s]=r;var d=i(8254);const u={UPLOAD_FINISHED:"SwagCustomizedProductsFileUploadFinished",UPLOAD_FAILED:"SwagCustomizedProductsFileUploadFailed",UPLOAD_REMOVED:"SwagCustomizedProductsFileUploadRemoved"};class c extends n.Z{init(){this.fileUpload=this.el,!1!==this._prepareUploadedFilesList()&&(this.stepByStepElement=a.Z.querySelector(document,'*[data-swag-customized-product-step-by-step="true"]',!1),this.dropzone=a.Z.querySelector(this.fileUpload,this.options.selectors.dropzonePrefix+this.options.optionId),this.input=a.Z.querySelector(this.dropzone,this.options.selectors.inputPrefix+this.options.optionId),this.browseButton=a.Z.querySelector(this.dropzone,this.options.selectors.browseButtonPrefix+this.options.optionId),this.buyForm=a.Z.querySelector(document,this.options.selectors.buyForm),this.iconSuccess=a.Z.querySelector(this.fileUpload,this.options.selectors.iconSuccess).innerHTML,this.iconError=a.Z.querySelector(this.fileUpload,this.options.selectors.iconError).innerHTML,this.httpClient=new d.Z,this.registry=new Map,this._registerEventListeners())}_prepareUploadedFilesList(){this.uploadedFilesList=a.Z.querySelector(this.fileUpload,this.options.selectors.uploadedFilesList);const e=a.Z.querySelector(this.uploadedFilesList,this.options.selectors.fileTemplate);return this.fileTemplate=e.cloneNode(!0),this.uploadedFilesList.hasChildNodes()&&this.uploadedFilesList.removeChild(e),null!==this.fileTemplate}_registerEventListeners(){this.input.addEventListener("change",this._onFileInputChanged.bind(this)),this.browseButton.addEventListener("click",this._onBrowse.bind(this)),this.dropzone.addEventListener("drop",this._onDropOnDropzone.bind(this)),document.addEventListener("dragenter",this._onDragEnter.bind(this),!1),document.addEventListener("dragleave",this._onDragLeave.bind(this),!1),document.addEventListener("dragover",this._onDragOver,!1),document.addEventListener("drop",this._onDropOnDocument.bind(this),!1)}_onDragEnter(e){e.preventDefault();const t=e.target,i=this.options.selectors.dropzoneIdPrefix+this.options.optionId;return!!t.closest(i)&&(this.dropzone.classList.add(this.options.classes.dragover),this.browseButton.setAttribute("disabled","disabled"),!0)}_onDragLeave(e){const t=e.target,i=this.options.selectors.dropzoneIdPrefix+this.options.optionId;return!t.closest(i)&&(this.dropzone.classList.remove("dragover"),this.browseButton.removeAttribute("disabled"),!0)}_onDragOver(e){e.preventDefault()}_onDropOnDocument(e){e.preventDefault(),this.dropzone.classList.remove(this.options.classes.dragover),this.browseButton.removeAttribute("disabled")}_onBrowse(e){e.preventDefault(),this.input.click()}_onDropOnDropzone(e){this._onFilesAdded(e.dataTransfer.files)}_onFileInputChanged(e){this._onFilesAdded(e.target.files)}_onFilesAdded(e){Array.from(e).forEach(this._handleFileUpload.bind(this)),this.input.value=""}setPageHeightInStepByStep(){if(!this.stepByStepElement)return!1;const e=window.PluginManager.getPluginInstanceFromElement(this.stepByStepElement,"SwagCustomizedProductsStepByStepWizard");return e.setPageHeight(e.currentPage,!0),!0}_handleFileUpload(e){if(this.registry.has(e.name))return!1;this.registry.set(e.name,{file:e,element:this._appendNewFileElement(e.name),valid:!1,uploaded:!1});if(this.registry.size>this.options.maxCount){const t="422";return this._onUploadError(e.name,t),!1}const t=new FileReader;return t.addEventListener("error",this._onUploadError.bind(this)),t.addEventListener("load",this._sendUploadRequest.bind(this,e)),t.readAsArrayBuffer(e),!0}_appendNewFileElement(e){const t=document.createElement("div");t.setAttribute("class",this.fileTemplate.getAttribute("class")),t.innerHTML=this.fileTemplate.innerHTML;return a.Z.querySelector(t,this.options.selectors.filename).innerHTML=e,this.uploadedFilesList.appendChild(t),this.setPageHeightInStepByStep(),t}_sendUploadRequest(e){const t=new FormData;t.append("file",e),t.append("optionId",this.options.optionId),this.httpClient.post(this.options.endpoint,t,this._uploadRequestCallback.bind(this,e.name),"multipart/form-data",!0)}_uploadRequestCallback(e,t,i){let o={};try{o=JSON.parse(t)}catch(t){return this._onUploadError(e,i.status.toString()),!1}return void 0!==o.errors?this._onUploadError(e,i.status.toString()):this._onUploadSuccess(e,o),this.updateBuyButton(),!0}_onUploadSuccess(e,t){const i=this.registry.get(e);if(!i)return;const o=a.Z.querySelector(i.element,this.options.selectors.iconElement);this.resetUploadElement(e),i.valid=!0,i.uploaded=!0,i.element.classList.add(this.options.classes.success),o.innerHTML=this.iconSuccess;const s=this._createMediaIdInput(e,t.mediaId),r=this._createFileNameInput(e);this.input.appendChild(s),this.input.appendChild(r),Array.from(this.registry.values()).map((e=>e.file)).forEach(this._handleFileUpload.bind(this)),this.updatePriceDisplay(),a.Z.querySelector(i.element,this.options.selectors.closeButton).addEventListener("click",this._onRemoveValidElement.bind(this,i,s,r)),this.$emitter.publish(u.UPLOAD_FINISHED)}resetUploadElement(e){if(!this.registry.has(e))return!1;const t=this.registry.get(e);t.valid=!1;return a.Z.querySelector(t.element,this.options.selectors.errorText).innerHTML="",t.element.classList.remove(this.options.classes.success),t.element.classList.remove(this.options.classes.error),!0}_onUploadError(e,t){const i=this.registry.get(e);if(!i)return;i.valid=!1,i.uploaded=!1;const o=a.Z.querySelector(i.element,this.options.selectors.iconElement);i.element.classList.add(this.options.classes.error),o.innerHTML=this.iconError;a.Z.querySelector(i.element,this.options.selectors.errorText).innerHTML=this.getSnippetByErrorCode(t),a.Z.querySelector(i.element,this.options.selectors.closeButton).addEventListener("click",this._onRemoveInvalidElement.bind(this,i)),this.$emitter.publish(u.UPLOAD_FAILED)}_onRemoveValidElement(e,t,i,o){this._removeElement(e,o),t.remove(),i.remove(),this.updatePriceDisplay(),this.updateBuyButton(),this.triggerExclusionValidation(),this.$emitter.publish(u.UPLOAD_REMOVED)}_onRemoveInvalidElement(e,t){this._removeElement(e,t),this.triggerExclusionValidation()}updateBuyButton(){const e=a.Z.querySelector(this.buyForm,this.options.selectors.customizedProductContainer,!1);if(e){window.PluginManager.getPluginInstanceFromElement(e,"SwagCustomizedProductsFormValidator").onFormChange()}}_removeElement(e,t){t.preventDefault(),this.uploadedFilesList.contains(e.element)&&this.uploadedFilesList.removeChild(e.element),this.registry.delete(e.file.name);if(Array.from(this.registry.values()).filter((({uploaded:e})=>e)).length<this.options.maxCount){const e=Array.from(this.registry.values()).filter((({uploaded:e})=>!e));e.length&&this._sendUploadRequest(e[0].file)}this.updateBuyButton(),this.setPageHeightInStepByStep()}_createMediaIdInput(e,t){const i=document.createElement("input");return i.type="hidden",i.name=`customized-products-template[options][${this.options.optionId}][media][${e}][id]`,i.value=t,i}_createFileNameInput(e){const t=document.createElement("input");return t.type="hidden",t.name=`customized-products-template[options][${this.options.optionId}][media][${e}][filename]`,t.value=e,t}updatePriceDisplay(){const e=a.Z.querySelector(document,this.options.selectors.priceDisplayContainer,!1);if(!e)return!1;return window.PluginManager.getPluginInstanceFromElement(e,"SwagCustomizedProductPriceDisplay").onFormChange(),!0}triggerExclusionValidation(){const e=a.Z.querySelector(document,this.options.selectors.customizedProductContainer,!1);if(!e)return!1;const t=window.PluginManager.getPluginInstanceFromElement(e,"SwagCustomizedProductsExclusionListValidation");return!!t&&(t.onInputChange(),!0)}getSnippetByErrorCode(e){const t=a.Z.getDataAttribute(this.el,"data-swag-customized-products-file-upload-translation-errors");return t[e]||t.generic}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(c,"options",{endpoint:"",optionId:"",maxCount:1,selectors:{dropzonePrefix:"#customized-products-dropzone-",inputPrefix:"#customized-products-dropzone-input-",browseButtonPrefix:"#customized-products-browse-",dropzoneIdPrefix:"#customized-products-dropzone-",upload:".customized-products-upload",buyForm:"#productDetailPageBuyProductForm",dropzone:".customized-products-upload__dropzone",uploadedFilesList:".customized-products-upload-files",fileTemplate:".customized-products-upload-files-element",filename:".customized-products-upload-files-element__container-filename",iconElement:".customized-products-upload-files-element__container-icon",closeButton:".customized-products-upload-files-element__container-close-button",priceDisplayContainer:'[data-swag-customized-product-price-display="true"]',customizedProductContainer:".swag-customized-products",iconSuccess:".customized-products-upload-icon-success",iconError:".customized-products-upload-icon-error",errorText:".customized-products-error-subtitle"},classes:{dragover:"dragover",success:"is--success",error:"is--error"}});class p extends n.Z{init(){this.buyForm=this.el.parentNode,this.exclusionsValid=!0,this._registerEventListeners()}_registerEventListeners(){this.$emitter.subscribe("buyButtonDisable",this.updateExclusionValidity.bind(this)),this.$emitter.subscribe("change",this.onFormChange.bind(this)),this.$emitter.subscribe(u.UPLOAD_FINISHED,this.onFormChange.bind(this)),this.$emitter.subscribe(u.UPLOAD_REMOVED,this.onFormChange.bind(this));const e=a.Z.querySelectorAll(this.buyForm,this.options.inputFieldsSelector,!1);e?(e.forEach((e=>{e.addEventListener("invalid",this._onInputInvalid.bind(this))})),this.onFormChange()):this.onFormChange()}validateFileUpload(e){const t=e.closest(this.options.selectors.fileUploadContainer);if(!t)return null;const i=window.PluginManager.getPluginInstanceFromElement(t,"SwagCustomizedProductsFileUpload");if(!i||!i.registry)return!0;return!(!(i.registry&&i.registry.size>0)&&a.Z.getDataAttribute(e,"required",!1))&&Array.from(i.registry.values()).every((({valid:e})=>e))}onFormChange(){const e=a.Z.querySelector(this.buyForm,this.options.selectors.buyButton),t=a.Z.querySelectorAll(this.buyForm,this.options.inputFieldsSelector,!1),i={},o={};let s=!1;t&&(s=Array.from(t).every((e=>{const t=e.dataset.swagCustomizedProductsSelectionRequired;if(void 0!==t&&(i[t]=i[t]||e.checked,e.hasAttribute("required")&&e.removeAttribute("required")),e.hasAttribute("data-date-picker")&&e.hasAttribute("required"))return!!e.value;const s=this.validateFileUpload(e);if(null!==s)return s;const r=window.PluginManager.getPluginInstanceFromElement(e,"SwagCustomizedProductsFieldValidation");if(r)return r.isValid();if("radio"===e.type&&e.hasAttribute("required")){const t=e.name;o[t]=o[t]||e.checked}return!("select"===e.tagName.toLowerCase()&&e.hasAttribute("required")&&""===e.value)})));let r=s&&Object.values(i).every((e=>e))&&Object.values(o).every((e=>e))&&this.exclusionsValid;const n=a.Z.querySelector(this.buyForm,this.options.selectors.confirmInput,!1);n&&(r=r&&n.checked),r?e.hasAttribute("disabled")&&e.removeAttribute("disabled"):e.setAttribute("disabled","disabled")}_onInputInvalid(e){const t=e.target.closest(".collapse");bootstrap.Collapse.getOrCreateInstance(t).show(),this.$emitter.publish("invalid",{element:e.target})}updateExclusionValidity(e){this.exclusionsValid=!e.detail,this.onFormChange()}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(p,"options",{inputFieldsSelector:".swag-customized-products-form-control:not(#swag-customized-products-one-time-share)",selectors:{buyButton:"#productDetailPageBuyProductForm .btn-buy",fileUploadContainer:".customized-products-upload",confirmInput:"#swag-customized-products-confirm-input"}});var h=i(46);const m=["<div><br></div>","<p><br></p>","<br>"],g=({tag:e="div",classes:t=[],attributes:i={},html:o=null,children:s=[],listeners:r={},styles:n={},value:a=null})=>{const l=document.createElement(e);return t.forEach((e=>{l.classList.add(e)})),Object.keys(i).forEach((e=>{const t=i[e];l.setAttribute(e,t)})),Object.keys(n).forEach((e=>{l.style[e]=n[e]})),o&&o.length>0&&(l.innerHTML=o),a&&a.length<0&&(l.value=a),s.forEach((e=>{l.appendChild(e)})),Object.keys(r).forEach((e=>{const t=r[e];l.addEventListener(e,t,!1)})),l},f=e=>{if("function"==typeof Event)return new Event(e);const t=document.createEvent("Event");return t.initEvent(e,!0,!0),t},b=()=>/Trident/.test(navigator.userAgent);class v extends n.Z{init(){const e=this.el.value||"";this.translations=a.Z.getDataAttribute(this.el,"swag-customized-products-html-editor-translations"),this.iconContainer=a.Z.querySelector(document,this.options.iconContainerSelector),this.formValidatorPlugin=window.PluginManager.getPluginInstanceFromElement(a.Z.querySelector(document,this.options.customizedProductContainer),"SwagCustomizedProductsFormValidator"),this.buttonConfig=this.hydrateButtonConfig(this.options.buttonConfig),this.iconContainer.parentNode.removeChild(this.iconContainer),delete this.iconContainer,this.toolbar=this.createToolbarElement();const{editor:t,editorWrapper:i}=this.createEditorElement(e);this.editor=t,this.editorWrapper=i,this.wrapper=this.createWrapperElement(),this.placeholder=this.createPlaceholder(e.length<=0),this.setupTextarea(),this.createPanel()}hydrateButtonConfig(e){return e.map((e=>{const t=a.Z.querySelector(this.iconContainer,`.${e.iconClassName}`,!1)||null;return e.icon=null,e.label=this.translations[e.action],t&&(e.icon=t.cloneNode(!0)),e}))}setupTextarea(){return this.el.style.display="none",!0}createPanel(){return this.wrapper.appendChild(this.toolbar),this.wrapper.appendChild(this.editorWrapper),this.editorWrapper.appendChild(this.placeholder),this.el.parentNode.appendChild(this.wrapper),!0}createToolbarElement(){const e=g({classes:[this.getPrefixedClass("toolbar")],attributes:{role:"toolbar","aria-label":this.translations.textFormatting,"aria-controls":this.getEditorElementId()}});return this.buttonConfig.forEach((t=>{e.appendChild(this.createToolbarButtonElement(t))})),e}createToolbarButtonElement(e){const t=g({tag:"button",classes:[this.getPrefixedClass("toolbar-button"),this.getPrefixedClass(`button-${e.action}`,"toolbar")],attributes:{"aria-pressed":e.pressed,"aria-label":e.label,tabindex:-1},html:e.icon?null:e.label,value:e.label,listeners:{click:t=>{t.preventDefault(),this.onToolbarButtonPressed(e)}}});if(e.icon){const i=e.icon;i.setAttribute("aria-hidden",!0),t.appendChild(i)}return e.button=t,t}createWrapperElement(){return g({classes:[this.options.baseClass]})}createEditorElement(e){const t="<div><br></div>",i=b()?"keydown":"input";let o=e||t;b()&&!e.length&&(o="");const s=g({classes:[this.getPrefixedClass("editor")],attributes:{contenteditable:!0,spellcheck:!0,autocorrect:!0,role:"textbox",id:this.getEditorElementId(),"aria-multiline":!0,tabindex:-1},html:o,listeners:{keydown:e=>{this.isEmpty()&&8===e.keyCode&&(e.preventDefault(),this.editor.innerHTML=t)},[i]:h.Z.debounce(this.onEditorInput.bind(this),350),focus:()=>{this.el.dispatchEvent(f("focus")),this.isEmpty()&&!b()&&(this.editor.innerHTML=t)},blur:()=>{this.el.dispatchEvent(f("blur")),this.isEmpty()&&this.showPlaceholder()}}}),r=g({classes:[this.getPrefixedClass("editor-wrapper")]});return r.appendChild(s),{editor:s,editorWrapper:r}}createPlaceholder(e){const t=this.el.getAttribute("placeholder");return g({classes:[this.getPrefixedClass("placeholder")],styles:{display:e?"block":"none"},listeners:{click:()=>{this.hidePlaceholder(),this.editor.focus()}},html:t})}getPrefixedClass(e,t=this.options.baseClass){return!(!e||!e.length<0)&&`${t}__${e}`}getEditorElementId(){return`${this.el.getAttribute("id")}-editor`}getContent(){return this.editor.innerHTML}getTextContent(){return this.editor.innerText.trim()}isEmpty(){return this.getTextContent().length<=0}onEditorInput(){const e=this.getContent();this.el.value=e,this.el.innerText=e,this.el.innerHTML=e,m.includes(e)&&(this.el.value="");const t=f("change"),i=f("input");this.el.dispatchEvent(t),this.el.dispatchEvent(i),this.el.closest("form").dispatchEvent(t),this.formValidatorPlugin.onFormChange()}onToolbarButtonPressed(e){const t=this.buttonConfig.findIndex((t=>t.action===e.action));document.execCommand(this.buttonConfig[t].action,!1)}showPlaceholder(){return!!this.placeholder&&(this.placeholder.style.display="block",!0)}hidePlaceholder(){return!!this.placeholder&&(this.placeholder.style.display="none",!0)}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(v,"options",{baseClass:"swag-custommized-product-html-editor",customizedProductContainer:".swag-customized-products",buttonConfig:[{action:"bold",iconClassName:"icon-editor-bold"},{action:"italic",iconClassName:"icon-editor-italic"},{action:"underline",iconClassName:"icon-editor-underline"},{action:"strikeThrough",iconClassName:"icon-editor-strikethrough"}]});var y=i(1966);class E extends n.Z{init(){this.translations={btnPrev:a.Z.getDataAttribute(this.el,"swag-customized-product-step-by-step-translation-btnprev"),btnNext:a.Z.getDataAttribute(this.el,"swag-customized-product-step-by-step-translation-btnnext"),btnFinish:a.Z.getDataAttribute(this.el,"swag-customized-product-step-by-step-translation-btnfinish"),required:a.Z.getDataAttribute(this.el,"swag-customized-product-step-by-step-translation-required")},this.containerEl=a.Z.querySelector(this.el,this.options.containerSelector),this.buyButton=a.Z.querySelector(document,this.options.buyButtonSelector),this.form=this.el.closest("form"),this.pages=a.Z.querySelectorAll(this.el,this.options.pageSelector),this.pages=this.collectPages(this.pages),this.pagesCount=this.pages.length,this.currentPage=1,this.configureElements=a.Z.querySelectorAll(this.el,this.options.configureStepByStepSelector),this.pagerEl=a.Z.querySelector(this.el,this.options.pagerSelector),this.pagerEl.innerHTML=this.renderPager(),this.navigationEntries=this.collectNavigationEntries(this.pages),this.navigationEl=a.Z.querySelector(this.el,this.options.navigationSelector),this.navigationEl.innerHTML=this.renderNavigationSelection(),y.Z.iterate(this.configureElements,(e=>{e.removeAttribute("disabled")})),this.options.history.enabled&&this.transitionToPage(1),this._registerEvents()}_registerEvents(){y.Z.iterate(this.configureElements,(e=>{e.addEventListener("click",this.onClickStartButton.bind(this),!1)})),this.form.addEventListener("change",this.onFormChanged.bind(this));const e=a.Z.querySelectorAll(this.form,`*[data-${this.options.fileUploadDataAttribute}]`,!1);return e.length>0&&e.forEach((e=>{e.addEventListener(u.UPLOAD_FINISHED,this.onFormChanged.bind(this)),e.addEventListener(u.UPLOAD_REMOVED,this.onFormChanged.bind(this))})),this.pagerEl.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(".btn-prev")&&this.prevPage(),e.target.matches(".btn-next")&&this.nextPage()})),this.navigationEl.addEventListener("change",this.onNavigationEntry.bind(this)),!(!E.isHistoryApiSupported()||!this.options.history.enabled)&&(window.addEventListener("popstate",this.onPopstate.bind(this)),!0)}onNavigationEntry(e){if(!e.target.matches(".swag-customized-products-navigation"))return;const t=parseInt(e.target.options[e.target.selectedIndex].value,10);this.transitionToPage(t+1)}onPopstate(){this.parseLocationHashOnAndJumpToPage()}onClickStartButton(e){e.preventDefault();this.transitionToPage(2)}onFormChanged(){this.pages=this.collectPages(a.Z.querySelectorAll(this.el,this.options.pageSelector)),this.renderPager()}renderNavigationSelection(){return this.navigationEl.style.display=(()=>this.currentPage<=1||this.currentPage>=this.pagesCount)()?"none":"block",`\n            <div class="form-group">\n                <div class="swag-customized-products-navigation">\n                    <select class="swag-customized-products-navigation" tabindex="-1">\n                       ${this.navigationEntries.map((e=>`\n                <option value="${e.pageNum}"${this.currentPage-1===e.pageNum?' selected="selected"':""}>\n                    ${e.pageNum} - ${e.name} ${e.required?`(${this.translations.required})`:""}\n                </option>`))}\n                    </select>\n                    <span class="swag-customized-products-navigation__text">\n                        ${(()=>{const e=this.navigationEntries.find((e=>this.currentPage-1===e.pageNum));return e?`${e.pageNum}. ${e.name}`:""})()}\n                    </span>\n                    <svg\n                        xmlns="http://www.w3.org/2000/svg"\n                        xmlns:xlink="http://www.w3.org/1999/xlink"\n                        width="16"\n                        height="16"\n                        viewBox="0 0 16 16"\n                        class="swag-customized-products-navigation__icon">\n                        <defs>\n                            <path\n                                id="icons-small-arrow-small-down-a"\n                                d="M5.70710678,6.29289322 C5.31658249,5.90236893 4.68341751,5.90236893 4.29289322,6.29289322 C3.90236893,6.68341751 3.90236893,7.31658249 4.29289322,7.70710678 L7.29289322,10.7071068 C7.68341751,11.0976311 8.31658249,11.0976311 8.70710678,10.7071068 L11.7071068,7.70710678 C12.0976311,7.31658249 12.0976311,6.68341751 11.7071068,6.29289322 C11.3165825,5.90236893 10.6834175,5.90236893 10.2928932,6.29289322 L8,8.58578644 L5.70710678,6.29289322 Z"/>\n                        </defs>\n                        <use\n                            fill="#758CA3"\n                            fill-rule="evenodd"\n                            transform="matrix(-1 0 0 1 16 0)"\n                            xlink:href="#icons-small-arrow-small-down-a"/>\n                    </svg>\n                </div>\n            </div>\n        `}renderPager(){return`\n            <div class="swag-customized-products-pager${(()=>this.currentPage<=1||this.currentPage>=this.pagesCount)()?" d-none":""}">\n                <button class="swag-customized-products-pager__button btn-prev btn btn-sm btn-outline-primary" tabindex="0"\n                        ${(()=>this.currentPage<=1?' disabled="disabled"':"")()}>\n                    ${this.translations.btnPrev}\n                </button>\n\n                <span class="swag-customized-products-pager__page-number">\n                    ${(()=>`${this.currentPage-1} / ${this.pagesCount-2}`)()}\n                </span>\n\n                <button class="swag-customized-products-pager__button btn-next btn btn-sm btn-outline-primary" tabindex="0"\n                        ${(()=>{const e=this.pages[this.currentPage-1],t=a.Z.querySelector(this.el,this.options.nextButtonSelector,!1);return E.isPageValid(e)?(t&&t.removeAttribute("disabled"),this.currentPage>=this.pagesCount?' disabled="disabled"':""):(t&&t.setAttribute("disabled","disabled"),' disabled="disabled"')})()}>\n                    ${(()=>this.currentPage-1>=this.pagesCount-2?this.translations.btnFinish:this.translations.btnNext)()}\n                </button>\n            </div>\n        `}collectPages(e){return Array.from(e).map(((e,t)=>{const i=a.Z.getDataAttribute(e,"name",!1)||null,o=this.collectFormControlFromPage(e,!0);let s=!1;return o&&o.elements&&(s=o.elements.some((e=>{const t=a.Z.getDataAttribute(e,"required",!1);return e.required||!!e.dataset.swagCustomizedProductsSelectionRequired||t}))),{pageEl:e,pageNum:t,name:i,required:s,formValidation:o}}))}collectNavigationEntries(e){return e.reduce(((e,t)=>t.name?(e.push(t),e):e),[])}nextPage(){let e=this.currentPage+1;return e>=this.pagesCount&&(e=this.pagesCount),this.transitionToPage(e)}prevPage(){let e=this.currentPage-1;return e<1&&(e=1),this.transitionToPage(e)}resetToFirstPage(){return this.transitionToPage(1)}transitionToPage(e,t=!0){return this.resetPreviousFormControl(this.pages[this.currentPage-1]),this.currentPage=e,this.setActiveFormElement(this.pages[this.currentPage-1]),this.pagerEl.innerHTML=this.renderPager(),this.navigationEl.innerHTML=this.renderNavigationSelection(),this.pages.forEach((e=>{e.pageEl.classList.add("swag-customized-products_step-mode-hidden"),e.pageEl.classList.remove("swag-customized-products_step-mode-shown")})),this.pages[e-1].pageEl.classList.remove("swag-customized-products_step-mode-hidden"),this.pages[e-1].pageEl.classList.add("swag-customized-products_step-mode-shown"),t&&this.updateHistory(),!0}setActiveFormElement(e){const t=e.formValidation,{elements:i,handler:o}=t;return!(!i||!o)&&(i.forEach((e=>{e.addEventListener("input",o,!1)})),!0)}collectFormControlFromPage(e){const t=Array.from(a.Z.querySelectorAll(e,this.options.formControlSelector,!1));if(!t)return{elements:null,handler:null,valid:!0};t.forEach((e=>{e.setAttribute("tabindex",-1)}));const i=h.Z.debounce(this.validateCurrentField.bind(this),this.options.validation.delay);return{elements:t,valid:t.every((e=>{if(void 0!==e.dataset.swagCustomizedProductsSelectionRequired)return e.checked;if(e.classList.contains(this.options.fileUploadElementClass)){const t=e.closest(this.options.fileUploadSelector),i=a.Z.getDataAttribute(t,this.options.fileUploadDataAttribute).maxCount,o=a.Z.querySelector(t,this.options.fileUploadFilesSelector).children.length;return o>0&&o<=i}return e.classList.contains(this.options.dateTimeClass)?!!e.value:e.validity.valid})),handler:i}}resetPreviousFormControl(e){const{elements:t,handler:i}=e.formValidation;return!i||(t.forEach((e=>{e.removeEventListener("input",i)})),!0)}validateCurrentField(){const e=this.pages[this.currentPage-1],{elements:t}=e.formValidation;let i;i=void 0!==a.Z.getDataAttribute(t[0],"swag-customized-products-selection-required",!1)?t.reduce(((e,t)=>e||t.checked),!1):t.reduce(((e,t)=>{if(!e)return e;let o=t.checkValidity();if(Object.prototype.hasOwnProperty.call(t,"_flatpickr")){o=t._flatpickr.selectedDates.length>0}if(t.__plugins&&t.__plugins.size>0&&t.__plugins.has("SwagCustomizedProductsHtmlEditor")){const e=window.PluginManager.getPluginInstanceFromElement(t,"SwagCustomizedProductsHtmlEditor");i=!e.isEmpty()}return e=o}),!0),e.formValidation.valid=i,this.pagerEl.innerHTML=this.renderPager(),this.navigationEl.innerHTML=this.renderNavigationSelection()}parseLocationHashOnAndJumpToPage(){if(!E.isHistoryApiSupported()||!this.options.history.enabled)return!1;if(!window.location.hash||window.location.hash.length<=0)return!1;const e=window.location.hash.substring(1);let t=parseInt(e.replace(this.options.history.hashPrefix,""),10);return t+=1,this.transitionToPage(t,!1),!0}updateHistory(){return!(!E.isHistoryApiSupported()||!this.options.history.enabled)&&(window.history.pushState({currentPage:this.currentPage,pagesCount:this.pagesCount},"",`#${this.options.history.hashPrefix}${this.currentPage-1}`),!0)}isValidConfiguration(){let e=this.pages.reduce(((e,t)=>e&&t.required?e=E.isPageValid(t):e),!0);const t=window.PluginManager.getPluginInstanceFromElement(this.el,"SwagCustomizedProductsExclusionListValidation");return t&&(e=!t.isViolation),e}static isPageValid(e){const{required:t,formValidation:i}=e;return!i||!(t&&!i.valid)}static elementOuterHeight(e){let t=e.getBoundingClientRect().height;const i=getComputedStyle(e);return t+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),t}static isHistoryApiSupported(){return!(!window.history||!history.pushState)}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(E,"options",{containerSelector:".swag-customized-products__scrollable",pageSelector:".swag-customized-products__item",configureStepByStepSelector:'*[data-swag-customized-product-step-by-step-configure="true"]',pagerSelector:".swag-customized-products__pager-holder",navigationSelector:".swag-customized-products__navigation-holder",formControlSelector:".swag-customized-products-form-control",buyButtonSelector:"#productDetailPageBuyProductForm .btn-buy",nextButtonSelector:".swag-customized-products-pager__button.btn-next",fileUploadSelector:".customized-products-upload",fileUploadElementClass:"swag-customized-products-option-type-template-fileupload",fileUploadDataAttribute:"swag-customized-products-file-upload-options",fileUploadFilesSelector:".customized-products-upload-files",dateTimeClass:"swag-customized-products-options-datetime",scrollableClass:"is--scrollable",history:{enabled:!0,hashPrefix:"wizard-step-"},validation:{delay:300,disableBuyButtonOnInvalid:!0},maxContentHeight:500});class w extends n.Z{init(){var e;this.parentEl=this.el.closest("form"),this.isStepByStepActive=a.Z.hasAttribute(this.el,"data-swag-customized-product-step-by-step"),this.stepByStepModePlugin=null,this.isStepByStepActive&&(this.stepByStepModePlugin=window.PluginManager.getPluginInstanceFromElement(this.el,"SwagCustomizedProductsStepByStepWizard")),this.violationHolderElement=a.Z.querySelector(this.parentEl,".swag-customized-products__violation-list-holder"),this.violationTemplate=this.violationHolderElement.querySelector("div"),this.violationTemplateString=this.violationTemplate.cloneNode(!0).children[0].outerHTML,this.buyButton=a.Z.querySelector(document,this.options.buyButtonSelector),this.isViolation=!1,this.violationTemplate.parentNode.removeChild(this.violationTemplate),this.translations={excludeItem:a.Z.getDataAttribute(this.el,"swag-exclusion-translation-excludeitem"),headline:a.Z.getDataAttribute(this.el,"swag-exclusion-translation-headline")},this.exclusions=null!==(e=a.Z.getDataAttribute(this.el,"data-swag-exclusion-list-validation-options"))&&void 0!==e?e:[];const t=this.collectInputElements(this.el,this.options);this.mergeExclusionWithElements(t),this.optionTypeManager=(e=>{let t={};const o=()=>{const e=i(9271);return e.keys().reduce(((t,i)=>{const o=e(i).default;return o.type.forEach((e=>{t[e]=o})),t}),{})},s=e=>Object.keys(t).includes(e);return t=o(),{name:"option-type-handler-manager",handlers:t,clear:(e=!1)=>(t={},e&&(t=o()),!0),has:s,get:e=>s(e)?t[e]:null,add:(e,i,o=!1)=>!(!o&&s(e)||(t[e]=i,0)),remove:e=>!!s(e)&&(delete t[e],!0),call:(i,o,s="validate",...r)=>{const n=t[o][s].apply(i,r);return e.publish(`swagCustomizedProducts/optionType/${s}/${o}`,{params:r}),n}}})(this.$emitter),this.onInputChange(),this._registerEventListeners()}_registerEventListeners(){this.parentEl.addEventListener("change",this.onInputChange.bind(this),!1),this.violationHolderElement.addEventListener("click",this.onViolationHolderElementClick.bind(this))}onViolationHolderElementClick(e){const t=e.target;if(!t.matches(".entry__link"))return;e.preventDefault();const i=a.Z.getDataAttribute(t,"data-target"),o=a.Z.querySelector(this.el,`#${i}`);this.isStepByStepActive&&this.switchPageInStepByStep(o);const s=o.closest(this.options.collapsePanelSelector);s&&!this.isStepByStepActive&&bootstrap.Collapse.getOrCreateInstance(s).show();const{top:r}=(e=>{const t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}})(o);window.scrollTo({top:r-this.options.scrollOffset,left:0,behavior:"smooth"})}switchPageInStepByStep(e){const t=this.stepByStepModePlugin,i=e.closest(".swag-customized-products__item"),o=t.navigationEntries.find((e=>e.pageEl.isSameNode(i)));return!!o&&(t.transitionToPage.call(t,o.pageNum+1),!0)}onInputChange(){const e=this.buildViolations();this.isViolation=e,e?this.$emitter.publish("buyButtonDisable",!0):this.$emitter.publish("buyButtonDisable",!1)}collectInputElements(e,t){return Array.from(a.Z.querySelectorAll(e,t.formControlSelector)).map((e=>({element:e,id:this.extractIdFromElement(e),defaultValue:e.defaultValue})))}mergeExclusionWithElements(e){if(this.exclusions.length<=0)return;this.exclusions.forEach((t=>{t.forEach((t=>{t.element=(t=>{const{element:i}=e.find((e=>e.id===t));return i})(t.id)}),[])}))}static mergeExclusionTreeWithElements(e,t){if(e.length<=0)return new Map;return e.reduce(((e,i)=>{let o=null;return i=i.reduce(((e,i)=>(null===o&&(o=i.id),i.element=(e=>{const{element:i}=t.find((t=>t.id===e));return i})(i.id),e.push(i),e)),[]),e.set(o,i),e}),new Map)}buildViolations(){let e=this.exclusions.map((e=>({violationFound:e.reduce(((e,t)=>{const{element:i,operator:o,type:s}=t;return e?e=this.validateElementState(i,o.type,s):e}),!0),elements:e})));if(e=e.filter((e=>!0===e.violationFound)),!e||e.length<=0)return w.updateViolationListDisplay([],this.violationHolderElement,this.translations,this.violationTemplateString),!1;const t=e.map((e=>e.elements)).map((e=>{const t=[...e],i=t.shift(),o=w.findLabelForFormElement(i.element),s=t.map((e=>({labelText:w.findLabelForFormElement(e.element),element:e.element})));return{element:i.element,labelText:o,excludedElements:s}}));return w.updateViolationListDisplay(t,this.violationHolderElement,this.translations,this.violationTemplateString),!0}extractIdFromElement(e){const t=e.id;return t&&t.length?t.replace(this.options.prefixes.optionId,"").replace(this.options.prefixes.uploadElement,""):""}validateElementState(e,t,i){return this.optionTypeManager.call(this,this.optionTypeManager.has(i)?i:"default","validate",{element:e,operator:t,type:i})}static findLabelForFormElement(e){return e.closest(".swag-customized-products-option",!1).querySelector(".swag-customized-products-option__title").innerText.trim()}static updateViolationListDisplay(e,t,i,o){if(!e||e.length<=0)return t.innerHTML="",!1;const s=`\n            <ul class="violation-list">\n                ${r=e,r.map((e=>{let t=e.excludedElements.map((e=>`<li>\n                        <strong class="entry__link" data-target="${e.element.id}">\n                            ${e.labelText}\n                        </strong>\n                    </li>`));return t=`<ul class="excluded-element-list">${t.join("")}</ul>`,`<li class="violation-list__entry">${((e,t)=>{let o=i.excludeItem.replace("%1",e);return o=o.replace("%2",t),o})(`<strong class="entry__link" data-target="${e.element.id}">${e.labelText}</strong>`,t)}</li>`})).join("")}\n            </ul>\n        `;var r;return o=(o=o.replace("%1",i.headline)).replace("%2",s),t.innerHTML=o,!0}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(w,"options",{formControlSelector:".swag-customized-products-form-control",buyButtonSelector:"#productDetailPageBuyProductForm .btn-buy",collapsePanelSelector:".collapse",scrollOffset:80,prefixes:{optionId:"swag-customized-products-option-id-",uploadElement:"customized-products-dropzone-input-"}});var S=i(4690);class P extends n.Z{init(){this.client=new d.Z,this.priceDisplayHolder=a.Z.querySelector(document,".swag-customized-product__price-display-holder"),this.buyForm=this.el.parentNode,this.buyButton=a.Z.querySelector(this.buyForm,this.options.buyButtonSelector),this.onFormChange(),this.buyForm.addEventListener("change",h.Z.debounce(this.onFormChange.bind(this),this.options.debounceTimeout))}onFormChange(){const e=new FormData(this.buyForm);S.Z.create(this.priceDisplayHolder),this.client.post(this.options.url,e,this.onTemplateReceived.bind(this))}onTemplateReceived(e){S.Z.remove(this.priceDisplayHolder),this.priceDisplayHolder.innerHTML=e}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(P,"options",{idPrefix:"swag-customized-products-option-id-",formControlSelector:".swag-customized-products-form-control",buyButtonSelector:"#productDetailPageBuyProductForm .btn-buy",url:"",debounceTimeout:250});var C=i(7969);class z extends n.Z{init(){this.template=a.Z.querySelector(this.el,this.options.templateSelector),this.imageEl=a.Z.querySelector(this.el,this.options.imageSelector),this.contentEl=null,this.closeButtonEl=null,this.prepareModalContent(),this.registerEvents()}registerEvents(){this.el.addEventListener("click",this.onImageClicked.bind(this))}registerKeyUpEventListener(){a.Z.querySelector(document,"body").addEventListener("keyup",this.onEscapePressed.bind(this),{once:!0})}prepareModalContent(){const e=a.Z.getAttribute(this.imageEl,"src"),t=a.Z.getAttribute(this.imageEl,"alt"),i=this.template,o=a.Z.querySelector(i,this.options.template.imageSelector),s=a.Z.querySelector(i,this.options.template.captionSelector);return o.setAttribute("src",e),o.setAttribute("alt",t),s.innerText=t,this.$emitter.publish("prepareModalContent",{content:i,imageCaption:t,imageSrc:e}),!0}onImageClicked(e){e.preventDefault(),this.$emitter.publish("onImageClicked",{event:e}),this.spawnZoomModal()}onCloseClicked(e){e.preventDefault(),this.$emitter.publish("onCloseClicked",{event:e}),C.ZP.remove(),a.Z.querySelector(document,"body").removeChild(this.contentEl)}onEscapePressed(e){e.preventDefault(),"Escape"===e.code?(this.$emitter.publish("onEscapeKeyUp",{event:e}),C.ZP.remove(),a.Z.querySelector(document,"body").removeChild(this.contentEl)):this.registerKeyUpEventListener()}spawnZoomModal(){return this.contentEl=this.template.firstElementChild.cloneNode(!0),this.closeButtonEl=a.Z.querySelector(this.contentEl,this.options.template.closeButtonSelector),this.closeButtonEl.addEventListener("click",this.onCloseClicked.bind(this),{once:!0}),this.registerKeyUpEventListener(),C.ZP.create((()=>{a.Z.querySelector(document,"body").appendChild(this.contentEl)})),this.$emitter.publish("spawnZoomModal",{contentEl:this.contentEl}),!0}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(z,"options",{imageSelector:".swag-customized-products-option__image",templateSelector:".swag-customized-products-image-zoom__template",template:{imageSelector:".swag-customized-products-image-zoom__image",captionSelector:".swag-customized-products-image-zoom__caption",closeButtonSelector:".swag-customized-products-image-zoom__icon-close"}});class F extends n.Z{init(){this.shareButton=this.el,this.buyForm=this.el.closest("form"),this.iconPaperclip=a.Z.querySelector(this.buyForm,".swag-customized-products-share-icons .icon-paperclip"),this.client=new d.Z,this.registerEvents()}registerEvents(){this.shareButton.addEventListener("click",this.onShareButtonClicked.bind(this))}onShareButtonClicked(e){e.preventDefault();const t=new FormData(this.buyForm);t.set("absoluteBaseUrl",this.options.absoluteBaseUrl),t.set("baseUrl",this.options.baseUrl),S.Z.create(this.el.closest(".card")),this.client.post(this.options.url,t,this.onConfigurationReceived.bind(this))}onConfigurationReceived(e){const t=JSON.parse(e).shareUrl,i=this.el.parentNode,o=document.createElement("div");o.classList.add("input-group");const s=document.createElement("input");s.setAttribute("readonly",!0),s.classList.add("form-control"),s.setAttribute("value",t),o.appendChild(s);const r=document.createElement("div"),n=document.createElement("button");n.appendChild(this.iconPaperclip.cloneNode(!0)),["btn","btn-sm"].forEach((e=>{n.classList.add(e)})),n.addEventListener("click",(e=>{e.preventDefault();try{s.select(),s.setSelectionRange(0,-1),document.execCommand("copy")}catch(e){s.classList.add("is-invalid")}s.classList.add("is-valid")})),r.appendChild(n),o.appendChild(r),Array.from(i.children).forEach((e=>{i.removeChild(e)})),i.appendChild(o),S.Z.remove(i.closest(".card"))}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(F,"options",{url:"",absoluteBaseUrl:"",baseUrl:""});class x extends n.Z{init(){this.buyForm=this.el.closest("form"),this.options.oldHash&&this.options.oldHash.length>0&&this.options.configuration.quantity&&this.restoreQuantity(),this.restoreUploadValues()}restoreQuantity(){a.Z.querySelector(this.buyForm,".product-detail-quantity-select").value=this.options.configuration.quantity}restoreUploadValues(){const e=[this.options.imageUploadType,this.options.fileUploadType];Object.keys(this.options.configuration).forEach((t=>{const i=this.options.configuration[t];i.type&&e.includes(i.type)&&this.restoreFiles(t,i.value)}))}restoreFiles(e,t){const i=a.Z.querySelector(this.buyForm,`${this.options.selectors.dropZone}${e}`,!1);if(!i)return!1;const o=window.PluginManager.getPluginInstanceFromElement(i.parentNode,"SwagCustomizedProductsFileUpload");return t.forEach((e=>{const t=e.filename,i=new File([],t);o.registry.set(t,{file:i,element:o._appendNewFileElement(t),valid:!0}),o._onUploadSuccess(t,{mediaId:e.mediaId})})),!0}}function _(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(x,"options",{configuration:[],oldHash:"",imageUploadType:"",fileUploadType:"",selectors:{dropZone:"#customized-products-dropzone-"}});class L extends n.Z{constructor(...e){super(...e),_(this,"isFieldValid",!0)}init(){this.el.addEventListener(this.options.onEvent,this.validateField.bind(this)),this.validateField(!0)}isValid(){return this.validateField(),this.isFieldValid}validateField(e=!1){if(e){window.PluginManager.getPluginInstanceFromElement(this.el.closest(".swag-customized-products"),"SwagCustomizedProductsFormValidator").onFormChange()}let{fieldType:t}=this.options;if(!t){const e=this.el.getAttribute("type");if("number"===e)t="numberfield";else{if("text"!==e)throw new Error("Could not detect fieldtype by input type. Please provide the fieldType option");t="textfield"}}const i=this.options.validationFunctions[t];if(!i)throw new Error(`No validation function for fieldType "${t}"`);const o=i.call(this,this.el);null!==o?this.showError(o):this.hideError()}getErrorElement(){return a.Z.querySelector(this.el.parentElement,this.options.errorElementSelector)}hideError(){this.getErrorElement().style.display="none",this.el.classList.remove("is-error"),this.isFieldValid=!0}showError(e){const t=this.getErrorElement();t.style.display="block",t.innerText=e,this.el.classList.add("is-error"),this.isFieldValid=!1}}_(L,"options",{errorElementSelector:".customized-products-error-subtitle",fieldType:null,onEvent:"change",translations:{numberfield:{required:"No snippet provided (required)",min:"No snippet provided (min)",max:"No snippet provided (max)"},textfield:{required:"No snippet provided (required)",min:"No snippet provided (min)",max:"No snippet provided (max)"},fileupload:{required:"No snippet provided (required)",fileCount:"No snippet provided (fileCount)",fileType:"No snippet provided (fileType)",fileSize:"No snippet provided (fileSize)",generic:"No snippet provided (generic)"}},validationFunctions:{numberfield(e){const t=parseInt(e.value,10),i=parseInt(e.min,10),o=parseInt(e.max,10);return!Number.isInteger(t)&&e.required?this.options.translations.numberfield.required:t<i?this.options.translations.numberfield.min:t>o?this.options.translations.numberfield.max:null},textfield(e){const{value:t,required:i,minLength:o,maxLength:s}=e;return!t.length&&i?this.options.translations.textfield.required:-1!==o&&t.length<o?this.options.translations.textfield.min:-1!==s&&t.length>s?this.options.translations.textfield.max:null}}}),window.PluginManager.register("SwagCustomizedProductsFileUpload",c,"[data-swag-customized-products-file-upload]"),window.PluginManager.register("SwagCustomizedProductsCollapsingValidOptions",l,'*[data-swag-customized-products-collapse="true"]'),window.PluginManager.register("SwagCustomizedProductsFormValidator",p,'[data-swag-customized-products-form-validator="true"]'),window.PluginManager.register("SwagCustomizedProductPriceDisplay",P,'[data-swag-customized-product-price-display="true"]'),window.PluginManager.register("SwagCustomizedProductsHtmlEditor",v,"[data-swag-customized-products-html-editor]"),window.PluginManager.register("SwagCustomizedProductsStepByStepWizard",E,'*[data-swag-customized-product-step-by-step="true"]'),window.PluginManager.register("SwagCustomizedProductsExclusionListValidation",w,'*[data-swag-exclusion-list-validation="true"]'),window.PluginManager.register("SwagCustomizedProductsImageZoom",z,'*[data-swag-customized-products-image-zoom="true"]'),window.PluginManager.register("SwagCustomizedProductsConfigurationShare",F,'*[data-swag-customized-products-configuration-share="true"]'),window.PluginManager.register("SwagCustomizedProductsRestoreConfiguration",x,'*[data-swag-customized-products-restore-configuration="true"]'),window.PluginManager.register("SwagCustomizedProductsFieldValidation",L,'*[data-swag-customized-products-field-validation="true"]')},4308:()=>{HTMLFormElement.prototype.reportValidity||(HTMLFormElement.prototype.reportValidity=function(){if(this.checkValidity())return!0;const e=document.createElement("button");return this.appendChild(e),e.click(),this.removeChild(e),!1}),HTMLInputElement.prototype.reportValidity||(HTMLInputElement.prototype.reportValidity=function(){if(this.checkValidity())return!0;let e;this.form||(e=document.createElement("form"),e.style.display="inline",this.before(e),e.append(this));const t=Array.from(this.form.elements).filter((function(e){return e!==this&&!!e.checkValidity&&!e.disabled}),this);return t.forEach((function(e){e.disabled=!0})),this.form.reportValidity(),t.forEach((function(e){e.disabled=!1})),e&&(e.before(this),e.remove()),this.focus(),this.selectionStart=0,!1})},9014:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});const o={type:["checkbox"],validate:({element:e,operator:t})=>"X"===t?e.checked:!e.checked}},9319:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});const o={type:["colorselect","imageselect","select"],validate:({element:e,operator:t})=>"select"===e.tagName.toLowerCase()?"X"===t?e.value.length>0:!e.value.length:"X"===t?!e.checked:e.checked}},2825:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});const o={type:["datetime","timestamp"],validate:({element:e,operator:t})=>"X"===t?e.value.length>0:!e.value.length}},6666:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});const o={type:["default"],validate:({element:e,operator:t})=>"X"===t?e.value.length>0:!e.value.length}},4571:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});const o={type:["htmleditor"],validate:({element:e,operator:t})=>{const i=window.PluginManager.getPluginInstanceFromElement(e,"SwagCustomizedProductsHtmlEditor");return"X"===t?!i.isEmpty():i.isEmpty()}}},3161:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});const o={type:["numberfield"],validate:({element:e,operator:t})=>{const i=e.defaultValue;return"X"===t?e.value!==i:e.value===i}}},2516:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>o});const o={type:["imageupload","fileupload"],validate:({element:e,operator:t})=>{const i=window.PluginManager.getPluginInstanceFromElement(e.closest(".customized-products-upload"),"SwagCustomizedProductsFileUpload");return"X"===t?i.registry.size>0:!i.registry.size}}}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=4939,e(e.s=t);var t}));e.O()}]);