"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["na15-active-filter-labels"],{6643:(e,t,i)=>{var s=i(5410),r=i(3206),l=i(1966);class n extends s.Z{init(){super.init()}getLabels(){const e=r.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let t=[];return e?l.Z.iterate(e,(e=>{t.push({label:e.dataset.label,propertyLabel:e.dataset.propertylabel,propertyDescription:e.dataset.propertydescription,id:e.id})})):t=[],t}}var o=i(3629);class a extends o.Z{init(){super.init()}getLabels(){const e=r.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let t=[];return e?l.Z.iterate(e,(e=>{t.push({label:e.dataset.label,propertyLabel:e.dataset.propertylabel,propertyDescription:e.dataset.propertydescription,id:e.id,previewHex:e.dataset.previewHex,previewImageUrl:e.dataset.previewImageUrl})})):t=[],t}}var c=i(8089);class h extends c.Z{init(){super.init()}getLabels(){let e=[];return this.checkbox.checked?e.push({label:this.options.displayName,propertyLabel:this.options.propertyName,id:this.options.name}):e=[],e}}var p=i(3139);class d extends p.Z{init(){super.init()}getLabelTemplate(e){let t="",i="",s=e.label;return null!=e.propertyLabel&&(t=e.propertyLabel),null!=e.propertyDescription&&(i=e.propertyDescription),s.includes(".000000")&&(s=s.replace(".000000",".00")),`\n        <span class="${this.options.activeFilterLabelClass}">\n            ${this.getLabelPreviewTemplate(e)}\n            ${t} ${s} ${i}\n            <button class="${this.options.activeFilterLabelRemoveClass}"\n                    data-id="${e.id}">\n                &times;\n            </button>\n        </span>\n        `}getLabelPreviewTemplate(e){const t=this.options.activeFilterLabelPreviewClass;return e.previewHex?`\n                <span class="${t}" style="background-color: ${e.previewHex};"></span>\n            `:e.previewImageUrl?`\n                <span class="${t}" style="background-image: url('${e.previewImageUrl}');"></span>\n            `:""}}const u=window.PluginManager;u.override("FilterMultiSelect",n,"[data-filter-multi-select]"),u.override("FilterPropertySelect",a,"[data-filter-property-select]"),u.override("FilterBoolean",h,"[data-filter-boolean]"),u.override("Listing",d,"[data-listing]")},6536:(e,t,i)=>{i.d(t,{Z:()=>a});var s,r,l,n=i(6285),o=i(3206);class a extends n.Z{_init(){super._init(),this._validateMethods();const e=o.Z.querySelector(document,this.options.parentFilterPanelSelector);this.listing=window.PluginManager.getPluginInstanceFromElement(e,"Listing"),this.listing.registerFilter(this),this._preventDropdownClose()}_preventDropdownClose(){const e=o.Z.querySelector(this.el,this.options.dropdownSelector,!1);e&&e.addEventListener("click",(e=>{e.stopPropagation()}))}_validateMethods(){if("function"!=typeof this.getValues)throw new Error(`[${this._pluginName}] Needs the method "getValues"'`);if("function"!=typeof this.getLabels)throw new Error(`[${this._pluginName}] Needs the method "getLabels"'`);if("function"!=typeof this.reset)throw new Error(`[${this._pluginName}] Needs the method "reset"'`);if("function"!=typeof this.resetAll)throw new Error(`[${this._pluginName}] Needs the method "resetAll"'`)}}s=a,l={parentFilterPanelSelector:".cms-element-product-listing-wrapper",dropdownSelector:".filter-panel-item-dropdown"},(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(r="options"))in s?Object.defineProperty(s,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[r]=l},8089:(e,t,i)=>{i.d(t,{Z:()=>h});var s,r,l,n=i(3206),o=i(6536),a=i(1857),c=i.n(a);class h extends o.Z{init(){this.checkbox=n.Z.querySelector(this.el,this.options.checkboxSelector),this._registerEvents()}_registerEvents(){this.checkbox.addEventListener("change",this._onChangeCheckbox.bind(this))}reset(e){e===this.options.name&&(this.checkbox.checked=!1)}resetAll(){this.checkbox.checked=!1}getValues(){const e={};return e[this.options.name]=this.checkbox.checked?"1":"",e}getLabels(){let e=[];return this.checkbox.checked?e.push({label:this.options.displayName,id:this.options.name}):e=[],e}setValuesFromUrl(e){let t=!1;return Object.keys(e).forEach((i=>{i===this.options.name&&e[i]&&(this.checkbox.checked=1,t=!0)})),t}refreshDisabledState(e){const t=e[this.options.name];t.max&&t.max>0?this.enableFilter():this.disableFilter()}enableFilter(){this.el.classList.remove("disabled"),this.el.removeAttribute("title"),this.checkbox.removeAttribute("disabled")}disableFilter(){this.el.classList.add("disabled"),this.el.setAttribute("title",this.options.snippets.disabledFilterText),this.checkbox.disabled=!0}_onChangeCheckbox(){this.listing.changeListing()}}s=h,r="options",l=c()(o.Z.options,{checkboxSelector:".filter-boolean-input",activeClass:"is-active",snippets:{disabledFilterText:"Filter not active"}}),(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(r))in s?Object.defineProperty(s,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[r]=l},5410:(e,t,i)=>{i.d(t,{Z:()=>p});var s,r,l,n=i(3206),o=i(1966),a=i(6536),c=i(1857),h=i.n(c);class p extends a.Z{init(){this.selection=[],this.counter=n.Z.querySelector(this.el,this.options.countSelector),this._registerEvents()}_registerEvents(){const e=n.Z.querySelectorAll(this.el,this.options.checkboxSelector);o.Z.iterate(e,(e=>{e.addEventListener("change",this._onChangeFilter.bind(this))}))}getValues(){const e=n.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let t=[];e?o.Z.iterate(e,(e=>{t.push(e.id)})):t=[],this.selection=t,this._updateCount();const i={};return i[this.options.name]=t,i}getLabels(){const e=n.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let t=[];return e?o.Z.iterate(e,(e=>{t.push({label:e.dataset.label,id:e.id})})):t=[],t}setValuesFromUrl(e={}){let t=!1;const i=e[this.options.name],s=i?i.split("|"):[],r=this.selection.filter((e=>!s.includes(e))),l=s.filter((e=>!this.selection.includes(e)));return(r.length>0||l.length>0)&&(t=!0),l.forEach((e=>{const t=n.Z.querySelector(this.el,`[id="${e}"]`,!1);t&&(t.checked=!0,this.selection.push(t.id))})),r.forEach((e=>{this.reset(e),this.selection=this.selection.filter((t=>t!==e))})),this._updateCount(),t}_onChangeFilter(){this.listing.changeListing(!0,{p:1})}reset(e){const t=n.Z.querySelector(this.el,`[id="${e}"]`,!1);t&&(t.checked=!1)}resetAll(){this.selection.filter=[];const e=n.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);e&&o.Z.iterate(e,(e=>{e.checked=!1}))}refreshDisabledState(e){const t=e[this.options.name];!t.entities||t.entities.length<1?this.disableFilter():(this.enableFilter(),this._disableInactiveFilterOptions(t.entities.map((e=>e.id))))}_disableInactiveFilterOptions(e){const t=n.Z.querySelectorAll(this.el,this.options.checkboxSelector);o.Z.iterate(t,(t=>{!0!==t.checked&&(e.includes(t.id)?this.enableOption(t):this.disableOption(t))}))}disableOption(e){const t=e.closest(this.options.listItemSelector);t.classList.add("disabled"),t.setAttribute("title",this.options.snippets.disabledFilterText),e.disabled=!0}enableOption(e){const t=e.closest(this.options.listItemSelector);t.removeAttribute("title"),t.classList.remove("disabled"),e.disabled=!1}enableAllOptions(){const e=n.Z.querySelectorAll(this.el,this.options.checkboxSelector);o.Z.iterate(e,(e=>{this.enableOption(e)}))}disableFilter(){const e=n.Z.querySelector(this.el,this.options.mainFilterButtonSelector);e.classList.add("disabled"),e.setAttribute("disabled","disabled"),e.setAttribute("title",this.options.snippets.disabledFilterText)}enableFilter(){const e=n.Z.querySelector(this.el,this.options.mainFilterButtonSelector);e.classList.remove("disabled"),e.removeAttribute("disabled"),e.removeAttribute("title")}_updateCount(){this.counter.innerText=this.selection.length?`(${this.selection.length})`:""}}s=p,r="options",l=h()(a.Z.options,{checkboxSelector:".filter-multi-select-checkbox",countSelector:".filter-multi-select-count",listItemSelector:".filter-multi-select-list-item",snippets:{disabledFilterText:"Filter not active"},mainFilterButtonSelector:".filter-panel-item-toggle"}),(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(r))in s?Object.defineProperty(s,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[r]=l},3629:(e,t,i)=>{i.d(t,{Z:()=>p});var s,r,l,n=i(5410),o=i(1966),a=i(3206),c=i(1857),h=i.n(c);class p extends n.Z{getLabels(){const e=a.Z.querySelectorAll(this.el,`${this.options.checkboxSelector}:checked`,!1);let t=[];return e?o.Z.iterate(e,(e=>{t.push({label:e.dataset.label,id:e.id,previewHex:e.dataset.previewHex,previewImageUrl:e.dataset.previewImageUrl})})):t=[],t}refreshDisabledState(e){if(""===this.options.propertyName)return;const t=[],i=e[this.options.name].entities;if(!i)return void this.disableFilter();const s=i.find((e=>e.translated.name===this.options.propertyName));if(!s)return void this.disableFilter();t.push(...s.options);const r=this.getValues();t.length<1&&0===r.properties.length?this.disableFilter():(this.enableFilter(),r.properties.length>0||this._disableInactiveFilterOptions(t.map((e=>e.id))))}}s=p,r="options",l=h()(n.Z.options,{propertyName:""}),(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(r))in s?Object.defineProperty(s,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[r]=l},3139:(e,t,i)=>{i.d(t,{Z:()=>b});var s,r,l,n=i(6285),o=i(8254),a=i(1966),c=i(3206),h=i(5944),p=i(5362),d=i(6510),u=i(46);class b extends n.Z{init(){this._registry=[],this.httpClient=new o.Z,this._urlFilterParams=h.parse(d.Z.getSearch()),this._filterPanel=c.Z.querySelector(document,this.options.filterPanelSelector,!1),this._filterPanelActive=!!this._filterPanel,this._filterPanelActive&&(this._showResetAll=!1,this.activeFilterContainer=c.Z.querySelector(document,this.options.activeFilterContainerSelector)),this._cmsProductListingWrapper=c.Z.querySelector(document,this.options.cmsProductListingWrapperSelector,!1),this._cmsProductListingWrapperActive=!!this._cmsProductListingWrapper,this._allFiltersInitializedDebounce=u.Z.debounce(this.sendDisabledFiltersRequest.bind(this),100),this._registerEvents()}refreshRegistry(){const e=this._registry.filter((e=>document.body.contains(e.el)));this.init(),this._registry=e,window.PluginManager.initializePlugins()}changeListing(e=!0,t={}){this._buildRequest(e,t),this._filterPanelActive&&this._buildLabels()}registerFilter(e){this._registry.push(e),this._setFilterState(e),this.options.disableEmptyFilter&&this._allFiltersInitializedDebounce()}_setFilterState(e){if(Object.keys(this._urlFilterParams).length>0&&"function"==typeof e.setValuesFromUrl){if(!e.setValuesFromUrl(this._urlFilterParams)||!this._filterPanelActive)return;this._showResetAll=!0,this._buildLabels()}}deregisterFilter(e){this._registry=this._registry.filter((t=>t!==e))}_fetchValuesOfRegisteredFilters(){const e={};return this._registry.forEach((t=>{const i=t.getValues();Object.keys(i).forEach((t=>{Object.prototype.hasOwnProperty.call(e,t)?Object.values(i[t]).forEach((i=>{e[t].push(i)})):e[t]=i[t]}))})),e}_mapFilters(e){const t={};return Object.keys(e).forEach((i=>{let s=e[i];Array.isArray(s)&&(s=s.join("|"));`${s}`.length&&(t[i]=s)})),t}_buildRequest(e=!0,t={}){const i=this._fetchValuesOfRegisteredFilters(),s=this._mapFilters(i);this._filterPanelActive&&(this._showResetAll=!!Object.keys(s).length),this.options.params&&Object.keys(this.options.params).forEach((e=>{s[e]=this.options.params[e]})),Object.entries(t).forEach((([e,t])=>{s[e]=t}));let r=h.stringify(s);this.sendDataRequest(r),delete s.slots,delete s["no-aggregations"],delete s["reduce-aggregations"],delete s["only-aggregations"],r=h.stringify(s),e&&this._updateHistory(r),this.options.scrollTopListingWrapper&&this._scrollTopOfListing()}_scrollTopOfListing(){const e=this._cmsProductListingWrapper.getBoundingClientRect();if(e.top>=0)return;const t=e.top+window.scrollY-this.options.scrollOffset;window.scrollTo({top:t,behavior:"smooth"})}_getDisabledFiltersParamsFromParams(e){const t=Object.assign({},{"only-aggregations":1,"reduce-aggregations":1},e);return delete t.p,delete t.order,delete t["no-aggregations"],t}_updateHistory(e){d.Z.push(d.Z.getLocation().pathname,e,{})}_buildLabels(){let e="";this._registry.forEach((t=>{const i=t.getLabels();i.length&&i.forEach((t=>{e+=this.getLabelTemplate(t)}))})),this.activeFilterContainer.innerHTML=e;const t=c.Z.querySelectorAll(this.activeFilterContainer,`.${this.options.activeFilterLabelRemoveClass}`,!1);e.length&&(this._registerLabelEvents(t),this.createResetAllButton())}_registerLabelEvents(e){a.Z.iterate(e,(e=>{e.addEventListener("click",(()=>this.resetFilter(e)))}))}createResetAllButton(){this.activeFilterContainer.insertAdjacentHTML("beforeend",this.getResetAllButtonTemplate());const e=c.Z.querySelector(this.activeFilterContainer,this.options.resetAllFilterButtonSelector);e.removeEventListener("click",this.resetAllFilter.bind(this)),e.addEventListener("click",this.resetAllFilter.bind(this)),this._showResetAll||e.remove()}resetFilter(e){this._registry.forEach((t=>{t.reset(e.dataset.id)})),this._buildRequest(),this._buildLabels()}resetAllFilter(){this._registry.forEach((e=>{e.resetAll()})),this._buildRequest(),this._buildLabels()}getLabelTemplate(e){return`\n        <span class="${this.options.activeFilterLabelClass}">\n            ${this.getLabelPreviewTemplate(e)}\n            ${e.label}\n            <button class="${this.options.activeFilterLabelRemoveClass}"\n                    data-id="${e.id}">\n                &times;\n            </button>\n        </span>\n        `}getLabelPreviewTemplate(e){const t=this.options.activeFilterLabelPreviewClass;return e.previewHex?`\n                <span class="${t}" style="background-color: ${e.previewHex};"></span>\n            `:e.previewImageUrl?`\n                <span class="${t}" style="background-image: url('${e.previewImageUrl}');"></span>\n            `:""}getResetAllButtonTemplate(){return`\n        <button class="${this.options.resetAllFilterButtonClasses}">\n            ${this.options.snippets.resetAllButtonText}\n        </button>\n        `}addLoadingIndicatorClass(){this._filterPanel.classList.add(this.options.loadingIndicatorClass)}removeLoadingIndicatorClass(){this._filterPanel.classList.remove(this.options.loadingIndicatorClass)}addLoadingElementLoaderClass(){this._cmsProductListingWrapper.classList.add(this.options.loadingElementLoaderClass)}removeLoadingElementLoaderClass(){this._cmsProductListingWrapper.classList.remove(this.options.loadingElementLoaderClass)}sendDataRequest(e){this._filterPanelActive&&this.addLoadingIndicatorClass(),this._cmsProductListingWrapperActive&&this.addLoadingElementLoaderClass(),this.options.disableEmptyFilter&&this.sendDisabledFiltersRequest(),this.httpClient.get(`${this.options.dataUrl}?${e}`,(e=>{this.renderResponse(e),this._filterPanelActive&&this.removeLoadingIndicatorClass(),this._cmsProductListingWrapperActive&&this.removeLoadingElementLoaderClass()}))}sendDisabledFiltersRequest(){const e=this._fetchValuesOfRegisteredFilters(),t=this._mapFilters(e);this.options.params&&Object.keys(this.options.params).forEach((e=>{t[e]=this.options.params[e]})),this._allFiltersInitializedDebounce=()=>{};const i=this._getDisabledFiltersParamsFromParams(t);this.httpClient.get(`${this.options.filterUrl}?${h.stringify(i)}`,(e=>{const t=JSON.parse(e);this._registry.forEach((e=>{"function"==typeof e.refreshDisabledState&&e.refreshDisabledState(t,i)}))}))}renderResponse(e){p.Z.replaceFromMarkup(e,this.options.cmsProductListingSelector,!1),this._registry.forEach((e=>{"function"==typeof e.afterContentChange&&e.afterContentChange()})),window.PluginManager.initializePlugins(),this.$emitter.publish("Listing/afterRenderResponse",{response:e})}_registerEvents(){window.onpopstate=this._onWindowPopstate.bind(this)}_onWindowPopstate(){this.refreshRegistry(),this._registry.forEach((e=>{0===Object.keys(this._urlFilterParams).length&&(this._urlFilterParams.p=1),this._setFilterState(e)})),this.options.disableEmptyFilter&&this._allFiltersInitializedDebounce(),this.changeListing(!1)}}s=b,l={dataUrl:"",filterUrl:"",params:{},filterPanelSelector:".filter-panel",cmsProductListingSelector:".cms-element-product-listing",cmsProductListingWrapperSelector:".cms-element-product-listing-wrapper",activeFilterContainerSelector:".filter-panel-active-container",activeFilterLabelClass:"filter-active",activeFilterLabelRemoveClass:"filter-active-remove",activeFilterLabelPreviewClass:"filter-active-preview",resetAllFilterButtonClasses:"filter-reset-all btn btn-sm btn-outline-danger",resetAllFilterButtonSelector:".filter-reset-all",loadingIndicatorClass:"is-loading",loadingElementLoaderClass:"has-element-loader",disableEmptyFilter:!1,snippets:{resetAllButtonText:"Reset all"},scrollTopListingWrapper:!0,scrollOffset:15},(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(r="options"))in s?Object.defineProperty(s,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[r]=l}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=6643,e(e.s=t);var t}));e.O()}]);