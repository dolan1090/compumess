{% sw_extends '@Storefront/storefront/page/product-detail/meta.html.twig' %}

{% set scdShowPriceQuery %}
    {% set ScDB2BInquiry = config('ScDB2BInquiry') %}
    {% set activeRules = context.context.ruleIds %}
    {% set scdRule = ScDB2BInquiry.config.scdRule %}

    {% if ((ScDB2BInquiry.config.ScDInquiryBasketType == "typeActivated" or
        (ScDB2BInquiry.config.ScDInquiryBasketType == "typeProductspecific" and product.translated.customFields.scd_activate_inquiry_basket))
        or (scdRule !== null and ScDB2BInquiry.config.ScDInquiryBasketType == "typeRule" and (scdRule in activeRules)))
        and (context.currentCustomerGroup.customFields.scd_customergroup_hideinquiry != true) %}
        {% set scdShowPrice = false %}
    {% else %}
        {% set scdShowPrice = true %}
    {% endif %}
{% endset %}

{% block layout_head_meta_tags_opengraph %}
    {{ scdShowPriceQuery }}

    <meta property="og:type"
          content="product"/>
    <meta property="og:site_name"
          content="{{ config('core.basicInformation.shopName') }}"/>
    <meta property="og:url"
          content="{{ seoUrl('frontend.detail.page', { productId: page.product.id }) }}"/>
    <meta property="og:title"
          content="{{ metaTitle }}"/>

    <meta property="og:description"
          content="{{ metaDescription }}"/>
    <meta property="og:image"
          content="{{ page.product.cover.media.url }}"/>

    {% if page.product.manufacturer %}
        <meta property="product:brand"
              content="{{ page.product.manufacturer.translated.name }}"/>
    {% endif %}
    {% if scdShowPrice %}
        <meta property="product:price"
              content="{{ page.product.calculatedPrice.unitPrice|currency }}"/>
        <meta property="product:product_link"
              content="{{ seoUrl('frontend.detail.page', { productId: page.product.id }) }}"/>
    {% endif %}

    <meta name="twitter:card"
          content="product"/>
    <meta name="twitter:site"
          content="{{ config('core.basicInformation.shopName') }}"/>
    <meta name="twitter:title"
          content="{{ metaTitle }}"/>
    <meta name="twitter:description"
          content="{{ metaDescription }}"/>
    <meta name="twitter:image"
          content="{{ page.product.cover.media.url }}"/>
{% endblock %}