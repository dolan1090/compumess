/*! For license information please see 4.js.LICENSE.txt */
(this["webpackJsonpPluginswag-publisher"]=this["webpackJsonpPluginswag-publisher"]||[]).push([[4],{"Iz/4":function(e,t,r){},P8hj:function(e,t,r){"use strict";function n(e,t){for(var r=[],n={},i=0;i<t.length;i++){var a=t[i],o=a[0],s={id:e+":"+i,css:a[1],media:a[2],sourceMap:a[3]};n[o]?n[o].parts.push(s):r.push(n[o]={id:o,parts:[s]})}return r}r.r(t),r.d(t,"default",(function(){return p}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},o=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,u=!1,l=function(){},d=null,f="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,r,i){u=r,d=i||{};var o=n(e,t);return v(o),function(t){for(var r=[],i=0;i<o.length;i++){var s=o[i];(c=a[s.id]).refs--,r.push(c)}t?v(o=n(e,t)):o=[];for(i=0;i<r.length;i++){var c;if(0===(c=r[i]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete a[c.id]}}}}function v(e){for(var t=0;t<e.length;t++){var r=e[t],n=a[r.id];if(n){n.refs++;for(var i=0;i<n.parts.length;i++)n.parts[i](r.parts[i]);for(;i<r.parts.length;i++)n.parts.push(m(r.parts[i]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var o=[];for(i=0;i<r.parts.length;i++)o.push(m(r.parts[i]));a[r.id]={id:r.id,refs:1,parts:o}}}}function g(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function m(e){var t,r,n=document.querySelector("style["+f+'~="'+e.id+'"]');if(n){if(u)return l;n.parentNode.removeChild(n)}if(h){var i=c++;n=s||(s=g()),t=b.bind(null,n,i,!1),r=b.bind(null,n,i,!0)}else n=g(),t=x.bind(null,n),r=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else r()}}var y,w=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function b(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function x(e,t){var r=t.css,n=t.media,i=t.sourceMap;if(n&&e.setAttribute("media",n),d.ssrId&&e.setAttribute(f,t.id),i&&(r+="\n/*# sourceURL="+i.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}},fyoO:function(e,t,r){var n=r("Iz/4");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r("P8hj").default)("f0d92336",n,!0,{})},rOui:function(e,t,r){"use strict";r.r(t);r("fyoO");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){i=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),s=new C(n||[]);return a(o,"_invoke",{value:_(e,r,s)}),o}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var h={};function p(){}function v(){}function g(){}var m={};l(m,s,(function(){return this}));var y=Object.getPrototypeOf,w=y&&y(y(S([])));w&&w!==t&&r.call(w,s)&&(m=w);var b=g.prototype=p.prototype=Object.create(m);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function i(a,o,s,c){var u=f(e[a],e,o);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==n(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,s,c)}),(function(e){i("throw",e,s,c)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return i("throw",e,s,c)}))}c(u.arg)}var o;a(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){i(e,r,t,n)}))}return o=o?o.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=N(o,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=f(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function N(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,N(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=f(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,h;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function S(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=g,a(b,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:v,configurable:!0}),v.displayName=l(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},x(L.prototype),l(L.prototype,c,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,i,a){void 0===a&&(a=Promise);var o=new L(d(t,r,n,i),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(b),l(b,u,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=S,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function a(e,t,r,n,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,i)}var o="update",s="insert",c="delete",u="discarded",l="merged",d="published",f="draftCreated",h="layoutCreated",p="updated",v="regular-checkmark-xxs",g="regular-minus-xxs",m="regular-plus-xxs",y="regular-circle",w="regular-circle-xxs",b="cms_page",x=Shopware,L=x.Component,_=x.Mixin;t.default=L.wrapComponentConfig({template:'<div class="publisher-activity-item">\n    <template>\n        <div class="publisher-activity-item__meta">\n            <sw-loader v-if="isLoading"></sw-loader>\n            <template v-else-if="log.user">\n                <sw-avatar\n                    class="publisher-activity-item__meta-user"\n                    :imageUrl="log.user.avatar"\n                    :firstName="log.user.firstName"\n                    :lastName="log.user.lastName"\n                ></sw-avatar>\n\n                <b>{{ userName }}</b>\n                <div class="publisher-activity-item__meta-date">{{ getDateString(log.updatedAt || log.createdAt) }}</div>\n            </template>\n            <div\n                class="publisher-activity-item__meta-badge"\n                :class="isMainLayoutEntry ? \'publisher-activity-item__meta-badge--main\' : \'\'"\n            >\n                <sw-icon\n                    size="8"\n                    :name="getBadgeIcon()"\n                ></sw-icon>\n\n                {{ getBadgeType() }}\n            </div>\n        </div>\n\n        <div\n            v-if="log.isMerged || log.isDiscarded"\n            class="publisher-activity-item__description"\n            v-html="getBadgeMessage()"\n        >\n        </div>\n        <div v-else>\n            <div\n                @click="onClickLayoutName(log)"\n                class="publisher-activity-item__name"\n                :class="canNavigate ? \'publisher-activity-item__name--link\' : \'\'"\n            >\n                {{ getDraftName() }}\n\n                <sw-icon\n                    name="regular-eye-s"\n                    size="16"\n                ></sw-icon>\n            </div>\n            <div\n                v-if="log.details && log.details.length"\n                class="publisher-activity-item__changes"\n            >\n                <div\n                    class="publisher-activity-item__changes--toggle"\n                    :class="showDetails ? \'active\' : \'\'"\n                    @click="onClickDetails"\n                >\n                    {{ $tc(\'publisher.activity.feed.\' + (showDetails ? \'hideDetails\' : \'showDetails\')) }}\n\n                    <sw-icon name="regular-chevron-down-xs" size="12px"></sw-icon>\n                </div>\n\n                <div v-if="showDetails">\n                    <div\n                        v-for="detail in log.details"\n                        class="publisher-activity-item__changes--detail"\n                        @mouseenter="onDetailMouseEnter(detail.id)"\n                        @mouseleave="onDetailMouseLeave(detail.id)"\n                    >\n                        <sw-icon :name="getDetailIcon(detail.operation)" size="8px"></sw-icon>\n\n                        {{ getDetailSnippet(detail) }} <i>{{ detail.name }}</i>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </template>\n</div>\n',props:["log"],mixins:[_.getByName("sw-publisher-activity")],data:function(){return{isLoading:!1,showDetails:!1}},computed:{isMainLayoutEntry:function(){var e=this.log,t=e.isDiscarded,r=e.isMerged,n=e.isReleasedAsNew,i=e.draftVersion;return r||n||!t&&!i},userName:function(){var e=this.log.user,t=e.firstName,r=e.lastName,n=e.userName;return t||r?"".concat(t," ").concat(r):n},isCurrentPage:function(){var e=this.log.draftVersion,t=this.$route.params.draftVersionId;return e===t||!e&&!t},canNavigate:function(){var e=this.log,t=e.isDiscarded,r=e.isMerged,n=e.isReleasedAsNew;return!(r||t||n||this.isCurrentPage)},isCreatedLayout:function(){return this.log.details&&this.log.details.some((function(e){var t=e.entityName,r=e.operation;return t===b&&r===s}))},isCreatedDraft:function(){var e=this.log,t=e.draftVersion,r=e.details;return t&&(!r||!r.length)}},methods:{getDraftName:function(){return this.log.name},getBadgeType:function(){var e=this.isCreatedLayout,t=this.isCreatedDraft,r=this.log,n=r.isDiscarded,i=r.isMerged,a=r.isReleasedAsNew,o=r.details,s="publisher.activity.feed.badges.cms_page.",c=0,v={};return n?s+=u:i?s+=l:a?s+=d:e?s+=h:t?s+=f:(s+=p,v={detailCount:c=o?o.length:0}),this.$tc(s,c,v)},getBadgeIcon:function(){var e=this.isCreatedLayout,t=this.isCreatedDraft,r=this.log,n=r.isDiscarded,i=r.isMerged,a=r.isReleasedAsNew;return i||a?v:n?g:t||e?m:y},getBadgeMessage:function(){var e=this.log,t=e.isDiscarded,r=e.isMerged,n="publisher.activity.feed.badgeMessages.cms_page.";return t?n+=u:r&&(n+=l),this.$tc(n,null,{draftName:this.getDraftName()})},onClickDetails:function(){this.showDetails=!this.showDetails},getDetailIcon:function(e){switch(e){case c:return g;case o:return w;case s:default:return m}},getDetailSnippet:function(e){var t=e.entityName,r=e.operation;return this.$tc("publisher.activity.feed.detail.".concat(t,".").concat(r))},onClickLayoutName:function(e){var t,r=this;return(t=i().mark((function t(){var n,a,o,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.pageId,a=e.draftVersion,r.canNavigate){t.next=3;break}return t.abrupt("return");case 3:o=r.$router.resolve({name:"sw.cms.detail",params:{id:n,draftVersionId:a}}),s=o.href,window.open(s);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(e){a(o,n,i,s,c,"next",e)}function c(e){a(o,n,i,s,c,"throw",e)}s(void 0)}))})()},onDetailMouseEnter:function(e){var t=document.querySelector('[data-publisher-selector="'.concat(e,'"]'));t&&t.parentElement.classList.add("publisher-highlight-changes")},onDetailMouseLeave:function(e){var t=document.querySelector('[data-publisher-selector="'.concat(e,'"]'));t&&t.parentElement.classList.remove("publisher-highlight-changes")}}})}}]);
//# sourceMappingURL=4.js.map