<sw-modal
    v-if="boosting"
    class="swag-advanced-search-boosting-modal"
    variant="large"
    :title="placeholder(boosting, 'name', $tc('swag-advanced-search.boostingTab.detail.newBoosting'))"
    :is-loading="isLoading"
    @modal-close="onCancel"
>
    <sw-container columns="1fr 1fr" gap="10px">
        <sw-text-field
            v-model="boosting.name"
            required
            :label="$tc('swag-advanced-search.boostingTab.detail.name')"
            :placeholder="$tc('swag-advanced-search.boostingTab.detail.name')"
        />
        <sw-container columns="2fr 1fr" gap="10px">
            <sw-number-field
                v-model="boosting.boost"
                required
                number-type="int"
                :label="$tc('swag-advanced-search.boostingTab.detail.boost')"
                :placeholder="$tc('swag-advanced-search.boostingTab.detail.boost')"
                :min="0"
                :step="1"
                :error="boostingBoostError"
            />
            <sw-switch-field
                v-model="boosting.active"
                size="medium"
                :label="$tc('swag-advanced-search.boostingTab.detail.active')"
            />
        </sw-container>
    </sw-container>

    <sw-container columns="1fr 1fr" gap="10px">
        <sw-datepicker
            v-model="boosting.validFrom"
            date-type="datetime"
            size="default"
            :label="$tc('swag-advanced-search.boostingTab.detail.validFrom')"
        />
        <sw-datepicker
            v-model="boosting.validTo"
            date-type="datetime"
            size="default"
            :label="$tc('swag-advanced-search.boostingTab.detail.validTo')"
            :error="boostingValidToError"
        />
    </sw-container>

    <sw-container columns="1fr 1fr" gap="10px">
        <sw-select-field
            v-model="boosting.type"
            required
            :label="$tc('swag-advanced-search.boostingTab.detail.streamType')"
            :placeholder="$tc('swag-advanced-search.boostingTab.detail.streamType')"
        >
            <option value="product_stream">
                {{ $tc('swag-advanced-search.boostingTab.detail.productStream') }}
            </option>
            <option value="entity_stream">
                {{ $tc('swag-advanced-search.boostingTab.detail.entityStream') }}
            </option>
        </sw-select-field>

        <sw-entity-single-select
            v-if="boosting.type === 'product_stream'"
            v-model="boosting.productStreamId"
            required
            entity="product_stream"
            :label="$tc('swag-advanced-search.boostingTab.detail.typeId')"
            :placeholder="$tc('swag-advanced-search.boostingTab.detail.typeIdPlaceholder')"
        >
        </sw-entity-single-select>

        <sw-select-field
            v-if="boosting.type === 'entity_stream' && entityStream"
            v-model="entityStream.type"
            required
            :label="$tc('swag-advanced-search.boostingTab.detail.type')"
            :placeholder="$tc('swag-advanced-search.boostingTab.detail.type')"
        >
            <option value="category">
                {{ $tc('swag-advanced-search.boostingTab.detail.category') }}
            </option>
            <option value="product_manufacturer">
                {{ $tc('swag-advanced-search.boostingTab.detail.manufacturer') }}
            </option>
        </sw-select-field>
    </sw-container>

    <div v-if="boosting.type === 'entity_stream' && entityStream">
        <swag-advanced-search-entity-stream
            v-if="entityStream.type"
            child-association-field="queries"
            association-field="entityStreamId"
            :condition-repository="entityStreamFiltersRepository"
            :condition-data-provider-service="entityStreamConditionService"
            :root-condition="null"
            :initial-conditions="entityStreamFilters"
            :entity-stream="entityStream"
            :association-value="entityStream.id"
            @conditions-changed="onChangeConditions"
        />
    </div>

    <template #modal-footer>
        <sw-button
            size="small"
            @click="onCancel"
        >
            {{ $tc('global.default.cancel') }}
        </sw-button>

        <sw-button
            variant="primary"
            size="small"
            :disabled="isDisabled"
            @click="onSave"
        >
            {{ $tc('global.default.save') }}
        </sw-button>
    </template>
</sw-modal>
