(this["webpackJsonpPluginclassification-customer"]=this["webpackJsonpPluginclassification-customer"]||[]).push([[4],{P8hj:function(t,e,n){"use strict";function i(t,e){for(var n=[],i={},a=0;a<e.length;a++){var s=e[a],r=s[0],o={id:t+":"+a,css:s[1],media:s[2],sourceMap:s[3]};i[r]?i[r].parts.push(o):n.push(i[r]={id:r,parts:[o]})}return n}n.r(e),n.d(e,"default",(function(){return m}));var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},r=a&&(document.head||document.getElementsByTagName("head")[0]),o=null,c=0,l=!1,u=function(){},d=null,f="data-vue-ssr-id",g="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(t,e,n,a){l=n,d=a||{};var r=i(t,e);return p(r),function(e){for(var n=[],a=0;a<r.length;a++){var o=r[a];(c=s[o.id]).refs--,n.push(c)}e?p(r=i(t,e)):r=[];for(a=0;a<n.length;a++){var c;if(0===(c=n[a]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete s[c.id]}}}}function p(t){for(var e=0;e<t.length;e++){var n=t[e],i=s[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(b(n.parts[a]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var r=[];for(a=0;a<n.parts.length;a++)r.push(b(n.parts[a]));s[n.id]={id:n.id,refs:1,parts:r}}}}function h(){var t=document.createElement("style");return t.type="text/css",r.appendChild(t),t}function b(t){var e,n,i=document.querySelector("style["+f+'~="'+t.id+'"]');if(i){if(l)return u;i.parentNode.removeChild(i)}if(g){var a=c++;i=o||(o=h()),e=y.bind(null,i,a,!1),n=y.bind(null,i,a,!0)}else i=h(),e=T.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}var v,w=(v=[],function(t,e){return v[t]=e,v.filter(Boolean).join("\n")});function y(t,e,n,i){var a=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,a);else{var s=document.createTextNode(a),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(s,r[e]):t.appendChild(s)}}function T(t,e){var n=e.css,i=e.media,a=e.sourceMap;if(i&&t.setAttribute("media",i),d.ssrId&&t.setAttribute(f,e.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}},qaRm:function(t,e,n){},"r/z9":function(t,e,n){var i=n("qaRm");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);(0,n("P8hj").default)("7cfc6644",i,!0,{})},wuxm:function(t,e,n){"use strict";n.r(e);n("r/z9");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==i(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===i(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=Shopware,c=o.Component,l=o.Mixin;e.default=c.wrapComponentConfig({template:'<div\n    class="swag-customer-classification-basic"\n>\n    <sw-card\n        position-identifier="swag-customer-classification-basic-info"\n        class="swag-customer-classification-basic__info-card"\n        :title="$tc(\'swag-customer-classification.cardTitleBasicInfo\')"\n    >\n        <sw-textarea-field\n            v-model="additionalInfo"\n            :label="$tc(\'swag-customer-classification.labelAdditionalInfo\')"\n            :placeholder="$tc(\'swag-customer-classification.placeholderAdditionalInfo\')"\n            :helpText="$tc(\'swag-customer-classification.helpTextGenerateContent\')"\n            :disabled="isGenerateLoading"\n        />\n\n        <sw-number-field\n            v-model="numberOfTags"\n            :label="$tc(\'swag-customer-classification.labelNumberOfTags\')"\n            :placeholder="$tc(\'swag-customer-classification.placeholderNumberOfTags\')"\n            :disabled="isGenerateLoading"\n            :min="1"\n            :max="5"\n        />\n\n        <sw-button-process\n            class="swag-customer-classification-basic__generate-button"\n            :is-loading="isGenerateLoading"\n            :disabled="isGenerateLoading"\n            :process-success="isGenerateSuccess"\n            @process-finish="generateFinish"\n            @click.prevent="generateTags"\n        >\n            {{ $tc(\'swag-customer-classification.buttonGenerate\') }}\n        </sw-button-process>\n\n        <sw-ai-copilot-warning />\n    </sw-card>\n\n    <sw-card\n        v-if="hasTagData && !isGenerateLoading"\n        position-identifier="swag-customer-classification-basic-tag-card"\n        class="swag-customer-classification-index__tag-card"\n        :title="$tc(\'swag-customer-classification.cardTitleLabels\')"\n    >\n        <sw-alert\n            class="swag-customer-classification-basic__tag-warning"\n            variant="warning"\n        >\n            {{ $tc(\'swag-customer-classification.tagWarning\') }}\n        </sw-alert>\n\n        <template #grid>\n            <sw-data-grid\n                class="swag-customer-classification-basic__tag-grid"\n                :data-source="tagData"\n                :columns="tagColumns"\n                @selection-change="onTagSelectionChange"\n            >\n                <template #actions="{item}">\n                    <sw-context-menu-item\n                        class="swag-customer-classification-basic__edit-tag"\n                        @click="onEditTag(item)"\n                    >\n                        {{ $tc(\'swag-customer-classification.labelGrid.buttonEdit\') }}\n                    </sw-context-menu-item>\n\n                    <sw-context-menu-item\n                        class="swag-customer-classification-basic__remove-tag"\n                        variant="danger"\n                        @click="onRemoveTag(item)"\n                    >\n                        {{ $tc(\'swag-customer-classification.labelGrid.buttonRemove\') }}\n                    </sw-context-menu-item>\n                </template>\n            </sw-data-grid>\n        </template>\n\n        <template #footer>\n            <sw-button\n                v-tooltip="{\n                    message: $tc(\'swag-customer-classification.tooltipButtonStart\'),\n                    disabled: !noSelectedTags,\n                    showOnDisabledElements: true\n                }"\n                class="swag-customer-classification-basic__start-button"\n                :disabled="noSelectedTags"\n                @click="onStartClick"\n            >\n                {{ $tc(\'swag-customer-classification.buttonStart\') }}\n            </sw-button>\n        </template>\n    </sw-card>\n\n    <swag-customer-classification-edit-tag-modal\n        v-if="selectedTag"\n        :item="selectedTag"\n        @modal-apply="onSaveTag"\n        @modal-close="onCloseEditTagModal"\n    />\n</div>\n',inject:["customerClassifyApiService"],mixins:[l.getByName("notification")],props:{tagData:{type:Array,required:!0}},data:function(){return{isGenerateLoading:!1,isGenerateSuccess:!1,tagColumns:[{property:"name",primary:!0,label:this.$tc("swag-customer-classification.labelGrid.columnTag"),inlineEdit:!0,multiLine:!0,width:"20%"},{property:"description",label:this.$tc("swag-customer-classification.labelGrid.columnDescription"),multiLine:!0,inlineEdit:!0,width:"40%"},{property:"ruleBuilder",label:this.$tc("swag-customer-classification.labelGrid.columnCondition"),inlineEdit:!0,multiLine:!0,width:"40%"}],additionalInfo:this.$tc("swag-customer-classification.placeholderAdditionalInfo"),selectedTag:null,selectedTags:[],numberOfTags:3}},computed:{hasTagData:function(){var t;return(null===(t=this.tagData)||void 0===t?void 0:t.length)>0},noSelectedTags:function(){return 0===this.selectedTags.length}},methods:{onTagSelectionChange:function(t){this.selectedTags=Object.values(t),this.$emit("tag-select",Object.values(t))},onRemoveTag:function(t){var e=this.tagData.filter((function(e){return e.id!==t.id}));this.$emit("tag-update",e)},onEditTag:function(t){this.selectedTag=s({},t)},generateTags:function(){var t=this;return this.isGenerateLoading=!0,this.customerClassifyApiService.generateTags(this.additionalInfo,this.numberOfTags).then((function(e){var n,i,a=null==e||null===(n=e.data)||void 0===n||null===(i=n.classifications)||void 0===i?void 0:i.map((function(t){return s({id:Shopware.Utils.createId()},t)}));t.$emit("tag-update",a),t.isGenerateSuccess=!0})).catch((function(e){var n,i,a,s=null==e||null===(n=e.response)||void 0===n||null===(i=n.data)||void 0===i||null===(a=i.errors[0])||void 0===a?void 0:a.detail;t.createNotificationError({title:t.$tc("global.default.error"),message:s})})).finally((function(){t.isGenerateLoading=!1}))},generateFinish:function(){this.isGenerateSuccess=!1},onCloseEditTagModal:function(){this.selectedTag=null},onSaveTag:function(t){var e=this.tagData.findIndex((function(e){return e.id==t.id}));this.$set(this.tagData,e,t),this.$emit("tag-update",this.tagData),this.onCloseEditTagModal()},onStartClick:function(){this.$emit("start-classify")}}})}}]);