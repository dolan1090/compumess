/*! For license information please see checkout-sweetener.js.LICENSE.txt */
!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=(window.__sw__.assetPath + '/bundles/checkoutsweetener/'),r(r.s="445Q")}({"+XDo":function(e,t,r){},"/gW0":function(e,t,r){var n=r("A3su");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r("P8hj").default)("2597949c",n,!0,{})},"445Q":function(e,t,r){"use strict";r.r(t);r("Iu2f");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){o=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),c=new S(n||[]);return i(a,"_invoke",{value:_(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var p={};function f(){}function m(){}function v(){}var g={};u(g,c,(function(){return this}));var y=Object.getPrototypeOf,w=y&&y(y(L([])));w&&w!==t&&r.call(w,c)&&(g=w);var b=v.prototype=f.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(i,a,c,s){var l=h(e[i],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==n(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,c,s)}),(function(e){o("throw",e,c,s)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return o("throw",e,c,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return a=a?a.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=h(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(x.prototype),u(x.prototype,s,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new x(d(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(b),u(b,l,"Generator"),u(b,c,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=L,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function i(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}Shopware.Component.override("sw-system-config",{template:'{% block sw_system_config_content_card_field %}\n    <template v-if="element.name === \'core.cart.aiCheckoutMessageShowDisclaimer\'">\n        <sw-inherit-wrapper\n            v-model="actualConfigData[currentSalesChannelId][element.name]"\n            v-bind="getInheritWrapperBind(element)"\n            :has-parent="isNotDefaultSalesChannel"\n            :inherited-value="getInheritedValue(element)"\n            :class="\'sw-system-config--field-\' + kebabCase(getElementBind(element).name)"\n        >\n            <template #content="props">\n                <sw-form-field-renderer\n                    v-bind="getElementBind(element, props)"\n                    :key="props.isInheritField + props.isInherited"\n                    :disabled="props.isInherited"\n                    :value="props.currentValue"\n                    :error="getFieldError(element.name)"\n                    @input="props.updateCurrentValue"\n                    @change="props.updateCurrentValue"\n                >\n                    <template #label>\n                        {{ getInlineSnippet(element.config.label) }}\n                        <br><span class="sw-field__label-hint">{{ $tc(\'commercial.checkout-sweetener.disclaimerHint\') }}</span>\n                    </template>\n                </sw-form-field-renderer>\n            </template>\n        </sw-inherit-wrapper>\n    </template>\n\n    <template v-else-if="element.name === \'core.cart.aiCheckoutMessagePreview\'">\n       <sw-settings-cart-ai-card-preview-link\n           :characterLimit="currentCharacterLimit"\n           :keywords="currentKeywords"\n       />\n    </template>\n\n    <template v-else>\n        {% parent %}\n    </template>\n{% endblock %}\n',computed:{currentCharacterLimit:function(){return this.actualConfigData[this.currentSalesChannelId]["core.cart.aiCheckoutMessageCharcaterLimit"]||null},currentKeywords:function(){return this.actualConfigData[this.currentSalesChannelId]["core.cart.aiCheckoutMessageKeywords"]||[]}},methods:{createdComponent:function(){var e,t=this;return(e=o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,t.$super("createdComponent");case 3:if(Shopware.License.get("CHECKOUT_SWEETENER-0270128")){e.next=5;break}return e.abrupt("return");case 5:if("core.cart"===t.domain){e.next=7;break}return e.abrupt("return");case 7:t.addCheckoutMessageCard();case 8:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){i(a,n,o,c,s,"next",e)}function s(e){i(a,n,o,c,s,"throw",e)}c(void 0)}))})()},addCheckoutMessageCard:function(){this.config.splice(-1,0,{elements:[{config:{componentName:"sw-settings-cart-ai-card-description"}},{config:{label:{"de-DE":this.$tc("commercial.checkout-sweetener.activateAiCopilot",0,"de-DE"),"en-GB":this.$tc("commercial.checkout-sweetener.activateAiCopilot",0,"en-GB")}},type:"bool",name:"core.cart.aiCheckoutMessageActive"},{config:{label:{"de-DE":this.$tc("commercial.checkout-sweetener.toneOfVoice",0,"de-DE"),"en-GB":this.$tc("commercial.checkout-sweetener.toneOfVoice",0,"en-GB")},helpText:{"de-DE":this.$tc("commercial.checkout-sweetener.toneOfVoiceHelpText",0,"de-DE"),"en-GB":this.$tc("commercial.checkout-sweetener.toneOfVoiceHelpText",0,"en-GB")},options:[{id:"neutral",name:{"de-DE":this.$tc("commercial.checkout-sweetener.keywordOptions.neutral",0,"de-DE"),"en-GB":this.$tc("commercial.checkout-sweetener.keywordOptions.neutral",0,"en-GB")}},{id:"exciting",name:{"de-DE":this.$tc("commercial.checkout-sweetener.keywordOptions.exciting",0,"de-DE"),"en-GB":this.$tc("commercial.checkout-sweetener.keywordOptions.exciting",0,"en-GB")}},{id:"humorous",name:{"de-DE":this.$tc("commercial.checkout-sweetener.keywordOptions.humorous",0,"de-DE"),"en-GB":this.$tc("commercial.checkout-sweetener.keywordOptions.humorous",0,"en-GB")}}]},type:"multi-select",name:"core.cart.aiCheckoutMessageKeywords"},{config:{label:{"de-DE":this.$tc("commercial.checkout-sweetener.characterLimit",0,"de-DE"),"en-GB":this.$tc("commercial.checkout-sweetener.characterLimit",0,"en-GB")},helpText:{"de-DE":this.$tc("commercial.checkout-sweetener.characterLimitHelpText",0,"de-DE"),"en-GB":this.$tc("commercial.checkout-sweetener.characterLimitHelpText",0,"en-GB")},max:600,allowEmpty:!0},type:"int",name:"core.cart.aiCheckoutMessageCharcaterLimit"},{config:{componentName:"sw-entity-multi-id-select",entity:"rule",label:{"de-DE":this.$tc("commercial.checkout-sweetener.availabilityRule",0,"de-DE"),"en-GB":this.$tc("commercial.checkout-sweetener.availabilityRule",0,"en-GB")},helpText:{"de-DE":this.$tc("commercial.checkout-sweetener.availabilityRuleHelpText",0,"de-DE"),"en-GB":this.$tc("commercial.checkout-sweetener.availabilityRuleHelpText",0,"en-GB")}},name:"core.cart.aiCheckoutMessageAvailabilityRules"},{config:{componentName:"sw-settings-cart-ai-card-preview-link"},name:"core.cart.aiCheckoutMessagePreview"}],name:null,title:{"de-DE":this.$tc("commercial.checkout-sweetener.title",0,"de-DE"),"en-GB":this.$tc("commercial.checkout-sweetener.title",0,"en-GB")},aiBadge:!0})}}});r("nLg3");Shopware.Component.register("sw-settings-cart-ai-card-description",{template:"{% block sw_settings_cart_ai_card_description %}\n    <span class=\"sw-field sw-settings-cart-ai-card__content-description\">\n        {{ $tc('commercial.checkout-sweetener.description') }}\n    </span>\n{% endblock %}\n"});r("5HAc");var a=Shopware,c=a.Component,s=a.Mixin;c.register("sw-settings-cart-ai-card-preview-link",{template:'{% block sw_settings_cart_ai_card_preview_link %}\n    <div class="sw-settings-cart-ai-card-preview-button">\n        <sw-button @click="togglePreviewModal">\n            <sw-icon\n                name="solid-sparkles"\n                size="12px"\n            />\n            {{ $tc(\'commercial.checkout-sweetener.preview\') }}\n        </sw-button>\n        <sw-settings-checkout-message-modal\n            v-if="showPreviewModal"\n            @modal-close="togglePreviewModal"\n        />\n    </div>\n{% endblock %}\n',mixins:[s.getByName("notification")],props:{characterLimit:{type:Number,require:!0},keywords:{type:Array,require:!0,validator:function(e){return e.every((function(e){return"string"==typeof e}))}}},data:function(){return{showPreviewModal:!1}},methods:{togglePreviewModal:function(){this.showPreviewModal=!this.showPreviewModal}}});r("pPmR");Shopware.Component.override("sw-order-detail-general",{template:'{% block sw_order_detail_general_line_items_card %}\n    {% parent() %}\n\n    {% block sw_order_detail_general_checkout_sweetener %}\n        <sw-card\n            v-if="sweetener"\n            :helpText="$tc(\'sw-order-checkout-sweetener.helpText\')"\n            position-identifier="sw-order-detail-general-checkout-sweetener"\n        >\n            <template #title>\n                <div class="sw-order-detail-general-title-container">\n                    <div class="sw-card__title">\n                        {{ $tc(\'commercial.checkout-sweetener.title\') }}\n                        <sw-help-text :text="$tc(\'commercial.checkout-sweetener.orderHelpText\')"></sw-help-text>\n                    </div>\n                    <sw-ai-copilot-badge />\n                </div>\n            </template>\n\n            <sw-textarea-field v-model="sweetener" disabled></sw-textarea-field>\n\n            <div class="sw-order-detail-general-checkout-sweetener__link">\n                <sw-internal-link\n                    :routerLink="{ name: \'sw.settings.cart.index\' }">\n                    {{ $tc(\'commercial.checkout-sweetener.orderHelpText.orderSettingsLink\') }}\n                </sw-internal-link>\n            </div>\n        </sw-card>\n    {% endblock %}\n{% endblock %}\n',computed:{sweetener:function(){var e;return Shopware.License.get("CHECKOUT_SWEETENER-0270128")?null===(e=this.order.customFields)||void 0===e?void 0:e.swagCommercialCheckoutSweetener:null}}});r("/gW0");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){u=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,r){return e[t]=r}}function d(e,t,r,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:_(e,r,c)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var p={};function f(){}function m(){}function v(){}var g={};s(g,i,(function(){return this}));var y=Object.getPrototypeOf,w=y&&y(y(L([])));w&&w!==t&&r.call(w,i)&&(g=w);var b=v.prototype=f.prototype=Object.create(g);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function o(n,i,a,c){var s=h(e[n],e,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==l(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function _(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=h(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function L(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=s(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,c,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},k(x.prototype),s(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new x(d(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(b),s(b,c,"Generator"),s(b,i,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=L,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:L(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function d(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}var h=Shopware,p=h.Component,f=h.Mixin;function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=b(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===m(t)?t:String(t)}function k(e,t){return(k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}p.register("sw-settings-checkout-message-modal",{template:'\n{% block sw_settings_checkout_message_modal_index %}\n    <sw-modal @modal-close="onClose">\n\n        <template #modal-header>\n            <div class="sw-settings-checkout-message-modal-header-container">\n                <div class="sw-modal__title">\n                    {{ $tc(\'commercial.checkout-sweetener.modalTitle\') }}\n                </div>\n                <sw-ai-copilot-badge />\n            </div>\n        </template>\n\n        <template #body>\n            <div class="sw-settings-checkout-message-modal-content-container">\n\n                <div>\n                    {{ $tc(\'commercial.checkout-sweetener.modalDescription\') }}\n                </div>\n\n                <div class="sw-settings-checkout-message-modal-products-container">\n                    <sw-multi-select\n                        v-model="keywords"\n                        :label="$tc(\'commercial.checkout-sweetener.toneOfVoice\')"\n                        :placeholder="$tc(\'commercial.checkout-sweetener.modalToneOfVoicePlaceholder\')"\n                        :options="keywordOptions"\n                        :help-text="$tc(\'commercial.checkout-sweetener.toneOfVoiceHelpText\')"\n                        required\n                    />\n                </div>\n\n                <div class="sw-settings-checkout-message-modal-products-container">\n                    <sw-number-field\n                        v-model="maxCharacters"\n                        :label="$tc(\'commercial.checkout-sweetener.characterLimit\')"\n                        :allowEmpty="true"\n                        :help-text="$tc(\'commercial.checkout-sweetener.characterLimitHelpText\')"\n                        :max="600"\n                    />\n                </div>\n\n                <div class="sw-settings-checkout-message-modal-products-container">\n                    <sw-entity-multi-id-select\n                        required\n                        v-model="productIds"\n                        :repository="productRepository"\n                        :label="$tc(\'commercial.checkout-sweetener.modalProductsSelection\')"\n                        :placeholder="$tc(\'commercial.checkout-sweetener.modalProductsPlaceholder\')"\n                        :help-text="$tc(\'commercial.checkout-sweetener.modalProductsHelperText\')"\n                    ></sw-entity-multi-id-select>\n                </div>\n\n                <div>\n                    <sw-button\n                        :disabled="isButtonDisabled"\n                        variant="primary"\n                        @click="generatePreview"\n                    >\n                        {{ $tc(\'commercial.checkout-sweetener.modalGeneratePreview\') }}\n                    </sw-button>\n                </div>\n\n                <div class="sw-settings-checkout-message-modal-preview-container">\n                    <div class="sw-settings-checkout-message-modal-message-label">\n                        {{ $tc(\'commercial.checkout-sweetener.modalPreview\') }}\n                    </div>\n                    <div class="sw-settings-checkout-message-modal__text-output">\n                        <template v-if="isLoading">\n                            <sw-product-generated-description-ellipsis\n                                class="sw-product-generated-description-modal__text-ellipsis">\n                            </sw-product-generated-description-ellipsis>\n                        </template>\n                        <p v-else>{{ previewMessage }}</p>\n                    </div>\n                    <div class="sw-settings-checkout-message-modal__text-details">\n                        <div class="sw-settings-checkout-message-modal__disclaimer">\n                            <sw-icon\n                                size="12px"\n                                name="solid-exclamation-triangle"\n                            />\n                            <p>\n                                {{ $tc(\'commercial.checkout-sweetener.disclaimer\') }}\n                            </p>\n                        </div>\n                        <p class="sw-settings-checkout-message-modal__characters-count">\n                        <span v-if="isCharactersCountVisible">\n                            {{ charactersCount }}\n                        </span>\n                        </p>\n                    </div>\n                </div>\n\n            </div>\n        </template>\n\n        <template #modal-footer>\n            <sw-button @click="onClose">\n                {{ $tc(\'global.sw-modal.labelClose\') }}\n            </sw-button>\n        </template>\n    </sw-modal>\n{% endblock %}\n',inject:["repositoryFactory","checkoutMessageService"],mixins:[f.getByName("notification")],data:function(){return{keywords:[],maxCharacters:null,productIds:[],disableGeneration:!0,isLoading:!1,previewMessage:""}},computed:{productRepository:function(){return this.repositoryFactory.create("product")},charactersCount:function(){var e=this.previewMessage.length;return"".concat(e,"/").concat(this.maxCharacters)},isCharactersCountVisible:function(){return null!==this.maxCharacters},isButtonDisabled:function(){var e=0===this.productIds.length,t=0===this.keywords.length;return this.disableGeneration||e||t||this.isLoading},keywordOptions:function(){return[{label:this.$tc("commercial.checkout-sweetener.keywordOptions.neutral"),value:"neutral"},{label:this.$tc("commercial.checkout-sweetener.keywordOptions.exciting"),value:"exciting"},{label:this.$tc("commercial.checkout-sweetener.keywordOptions.humorous"),value:"humorous"}]}},watch:{productIds:function(e,t){t!==e&&(this.disableGeneration=!1)},maxCharacters:function(e,t){e!==t&&(this.disableGeneration=!1)},keywords:function(e,t){t!==e&&(this.disableGeneration=!1)}},methods:{onClose:function(){this.$emit("modal-close")},generatePreview:function(){var e,t=this;return(e=u().mark((function e(){var r,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,r={keywords:t.keywords,productIds:t.productIds,length:t.maxCharacters},t.currentProductIdsLength=r.productIds.length,e.next=6,t.checkoutMessageService.generate(r);case 6:if((n=e.sent).data.text){e.next=9;break}return e.abrupt("return");case 9:t.disableGeneration=!0,t.previewMessage=n.data.text,t.createNotificationSuccess({message:t.$tc("commercial.checkout-sweetener.messageSuccess")}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t.createNotificationError({message:t.$tc("commercial.checkout-sweetener.messageFailure")});case 17:return e.prev=17,t.isLoading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){d(i,n,o,a,c,"next",e)}function c(e){d(i,n,o,a,c,"throw",e)}a(void 0)}))})()}}});var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(i,Shopware.Classes.ApiService);var t,r,n,o=x(i);function i(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,e,t,null,"application/json")).name="checkoutMessageService",r}return t=i,(r=[{key:"generate",value:function(e){if(Shopware.License.get("CHECKOUT_SWEETENER-3877631"))return this.httpClient.post("/_action/generate-checkout-sweetener",e,{headers:g({},this.getBasicHeaders())})}}])&&w(t.prototype,r),n&&w(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(),P=r("Fq3/"),S=r("WaHB");Shopware.Locale.extend("de-DE",P),Shopware.Locale.extend("en-GB",S),Shopware.Service().register("checkoutMessageService",(function(){var e=Shopware.Application.getContainer("init");return new O(e.httpClient,Shopware.Service("loginService"))}))},"5HAc":function(e,t,r){var n=r("uPAh");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r("P8hj").default)("3d84b694",n,!0,{})},A3su:function(e,t,r){},"Fq3/":function(e){e.exports=JSON.parse('{"commercial":{"checkout-sweetener":{"title":"Bestellabschluss-Nachricht","disclaimerHint":"“Dieser Text wurde vollständig von einer AI generiert.”","modalTitle":"Vorschau Bestellabschluss-Nachricht","modalDescription":"Verändere einzelne Parameter oder die Produktauswahl, um einen Eindruck von den AI-generierten Bestellabschluss-Nachrichten zu bekommen.","modalProductsSelection":"Produktauswahl","modalProductsPlaceholder":"Produkte auswählen ...","modalToneOfVoicePlaceholder":"Tonfall auswählen...","modalProductsHelperText":"Wähle hier mindestens eins oder mehrere Produkte aus.","modalGeneratePreview":"Vorschau generieren","modalPreview":"Bestellabschluss-Nachricht","messageSuccess":"Nachricht erfolgreich generiert.","messageFailure":"Der Dienst ist im Moment nicht verfügbar. Bitte versuche es später noch einmal.","keywordOptions":{"neutral":"Neutral","exciting":"Angeregt","humorous":"Humorvoll"},"orderHelpText":"Die von der AI generierte Bestellabschluss-Nachricht wurde auf der Bestätigungsseite für diese Bestellung angezeigt. Diese Nachricht kann nicht geändert werden und wird hier zu Dokumentationszwecken gespeichert.","orderSettingsLink":"Einstellungen","availabilityRule":"Verfügbarkeitsregel","availabilityRuleHelpText":"Verwende Regeln, um den Geltungsumfang und die Zielgruppe von Bestellabschluss-Nachrichten zu beeinflussen.","activateAiCopilot":"Aktiviere AI-Copilot generierte Bestellabschluss-Nachrichten","toneOfVoiceHelpText":"Mit der Einstellung des Tonfalls kannst du die Stimmung der AI-generierten Texts beeinflussen.","toneOfVoice":"Tonfall","characterLimit":"Zeichenanzahl","characterLimitHelpText":"Die Zeichenanzahl ist nur ein Richtwert für die AI. Die AI wird versuchen, den Text so nah wie möglich an der Zeichenanzahl zu generieren. Produktnamen werden nicht auf die Zeichenanzahl angerechnet.","disclaimer":"AI-generierte Antworten können ungenau oder irreführend sein.","description":"Die von der AI generierten Nachrichten können auf der Bestätigungsseite am Ende des Bestellprozesses angezeigt werden. Eine individuelle Bestellabschluss-Nachricht erhöht den Personalisierungsgrad deines Shops.","preview":"AI-Copilot-Vorschau"}}}')},Iu2f:function(e,t,r){var n=r("+XDo");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r("P8hj").default)("6d886a77",n,!0,{})},P8hj:function(e,t,r){"use strict";function n(e,t){for(var r=[],n={},o=0;o<t.length;o++){var i=t[o],a=i[0],c={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};n[a]?n[a].parts.push(c):r.push(n[a]={id:a,parts:[c]})}return r}r.r(t),r.d(t,"default",(function(){return f}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},a=o&&(document.head||document.getElementsByTagName("head")[0]),c=null,s=0,l=!1,u=function(){},d=null,h="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,r,o){l=r,d=o||{};var a=n(e,t);return m(a),function(t){for(var r=[],o=0;o<a.length;o++){var c=a[o];(s=i[c.id]).refs--,r.push(s)}t?m(a=n(e,t)):a=[];for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete i[s.id]}}}}function m(e){for(var t=0;t<e.length;t++){var r=e[t],n=i[r.id];if(n){n.refs++;for(var o=0;o<n.parts.length;o++)n.parts[o](r.parts[o]);for(;o<r.parts.length;o++)n.parts.push(g(r.parts[o]));n.parts.length>r.parts.length&&(n.parts.length=r.parts.length)}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(g(r.parts[o]));i[r.id]={id:r.id,refs:1,parts:a}}}}function v(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function g(e){var t,r,n=document.querySelector("style["+h+'~="'+e.id+'"]');if(n){if(l)return u;n.parentNode.removeChild(n)}if(p){var o=s++;n=c||(c=v()),t=b.bind(null,n,o,!1),r=b.bind(null,n,o,!0)}else n=v(),t=k.bind(null,n),r=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else r()}}var y,w=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function b(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=w(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function k(e,t){var r=t.css,n=t.media,o=t.sourceMap;if(n&&e.setAttribute("media",n),d.ssrId&&e.setAttribute(h,t.id),o&&(r+="\n/*# sourceURL="+o.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}},WaHB:function(e){e.exports=JSON.parse('{"commercial":{"checkout-sweetener":{"title":"Checkout message","disclaimerHint":"“This text was fully generated by an AI.”","modalTitle":"Checkout message preview","modalDescription":"Change individual parameters or the product selection to get an impression of the AI generated checkout messages.","modalProductsSelection":"Product selection","modalProductsPlaceholder":"Select products...","modalToneOfVoicePlaceholder":"Select tone of voice...","modalProductsHelperText":"Select one or more products to get an idea of how the checkout message could look like.","modalGeneratePreview":"Generate preview","modalPreview":"Checkout message","messageSuccess":"Message generated successfully.","messageFailure":"The service is unavailable at the moment. Please try again later.","keywordOptions":{"neutral":"Neutral","exciting":"Excited","humorous":"Humorous"},"orderHelpText":"The AI generated checkout message has been displayed on the confirmation page of this order. This message cannot be changed and is saved here for documentation purposes.","orderSettingsLink":"Change settings","availabilityRule":"Availability rule","availabilityRuleHelpText":"Use rules to control the scope and audience of checkout messages.","activateAiCopilot":"Activate AI Copilot generated checkout messages","toneOfVoiceHelpText":"By setting the tone of voice you can influence the mood of the AI-generated texts.","toneOfVoice":"Tone of voice","characterLimit":"Character count","characterLimitHelpText":"The character count is only a guideline for the AI. The AI will try to generate text as close to the character count as possible. Product names are not counted towards the character count.","disclaimer":"AI responses can be inaccurate or misleading.","description":"AI generated checkout messages can be displayed on the confirmation page at the end of the checkout process. These individual checkout messages provide a higher degree of personalisation to your shop.","preview":"AI Copilot preview"}}}')},ZzOJ:function(e,t,r){},nLg3:function(e,t,r){var n=r("uEt1");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r("P8hj").default)("3d1f611b",n,!0,{})},pPmR:function(e,t,r){var n=r("ZzOJ");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,r("P8hj").default)("791b72e7",n,!0,{})},uEt1:function(e,t,r){},uPAh:function(e,t,r){}});
//# sourceMappingURL=checkout-sweetener.js.map