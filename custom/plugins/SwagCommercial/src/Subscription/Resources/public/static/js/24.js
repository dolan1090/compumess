(this.webpackJsonpPluginsubscription=this.webpackJsonpPluginsubscription||[]).push([[24],{DSUE:function(t,e,r){"use strict";r.r(e);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=Shopware.Component.getComponentHelper().mapState,l=Shopware.Data.Criteria;e.default=Shopware.Component.wrapComponentConfig({template:'<sw-card\n    position-identifier="sw-subscription-detail-orders"\n    class="sw-subscription-detail-orders"\n    :title="$tc(\'commercial.subscriptions.subscriptions.detail.tabOrders\')"\n>\n\n    <template\n        v-if="(orders && orders.length > 0) || term"\n        #toolbar\n    >\n        <sw-card-filter @sw-card-filter-term-change="onChangeTerm" />\n    </template>\n\n    <template\n        v-if="(orders && orders.length > 0) || term"\n        #grid\n    >\n        <sw-entity-listing\n            ref="entityListing"\n            :repository="orderRepository"\n            :is-loading="isLoading"\n            :columns="orderColumns"\n            :items="orders"\n            :allow-column-edit="false"\n            :show-settings="false"\n            :show-selection="false"\n            :allow-delete="acl.can(\'subscription.editor\')"\n            :allow-view="acl.can(\'subscription.viewer\')"\n            :allow-edit="acl.can(\'subscription.editor\')"\n            :full-page="false"\n            detail-route="sw.order.detail"\n        >\n            <template #column-orderNumber="{ item }">\n                <router-link :to="{ name: \'sw.order.detail\', params: { id: item.id } }">\n                    {{ item.orderNumber }}\n                </router-link>\n            </template>\n\n            <template #column-amountTotal="{ item }">\n                {{ item.amountTotal | currency(item.currency.shortName) }}\n            </template>\n\n            <template #column-orderDateTime="{ item }">\n                <sw-time-ago :date="item.orderDateTime" />\n            </template>\n\n            <template #pagination>\n                <sw-pagination\n                    :page="orderCriteria.page"\n                    :limit="orderCriteria.limit"\n                    :total="orders.total"\n                    :total-visible="5"\n                    :auto-hide="false"\n                    @page-change="onChangePage"\n                />\n            </template>\n\n            <template #actions="{ item }">\n                <sw-context-menu-item\n                    class="sw-subscription-detail-orders__view-action"\n                    :router-link="{ name: \'sw.order.detail\', params: { id: item.id } }"\n                >\n                    {{ $tc(\'commercial.subscriptions.subscriptions.detail.orders.contextOpenOrder\') }}\n                </sw-context-menu-item>\n            </template>\n        </sw-entity-listing>\n    </template>\n\n    <template v-if="(!orders || orders.length === 0) && !isLoading && !term">\n        <sw-empty-state\n            :title="$tc(\'commercial.subscriptions.subscriptions.detail.orders.emptyOrdersTitle\')"\n            :absolute="false"\n            :subline="$tc(\'commercial.subscriptions.subscriptions.detail.orders.emptyOrdersSubline\')"\n        >\n            <template #icon>\n                <img\n                    :src="\'/administration/static/img/empty-states/order-empty-state.svg\' | asset"\n                    :alt="$tc(\'commercial.subscriptions.subscriptions.detail.orders.emptyProductsTitle\')"\n                >\n            </template>\n        </sw-empty-state>\n    </template>\n</sw-card>\n',inject:["repositoryFactory","acl"],data:function(){return{orders:null,isLoading:!1,page:1,limit:25,total:0,term:"",sortBy:"name",sortDirection:"ASC"}},computed:o(o({},a("swSubscription",["subscription"])),{},{orderRepository:function(){return this.repositoryFactory.create("order")},orderCriteria:function(){var t=new l(this.page,this.limit);return t.setTotalCountMode(1),t.addAssociation("subscription"),t.addAssociation("currency"),t.addFilter(l.equals("order.subscription.id",this.subscription.id)),this.term&&t.setTerm(this.term),t},orderColumns:function(){return[{property:"orderNumber",label:"sw-customer.detailOrder.columnNumber"},{property:"amountTotal",label:"sw-customer.detailOrder.columnAmount",align:"right"},{property:"stateMachineState.name",label:"sw-customer.detailOrder.columnOrderState"},{property:"orderDateTime",label:"sw-customer.detailOrder.columnOrderDate"}]}}),created:function(){this.createdComponent()},methods:{createdComponent:function(){this.loadOrders()},loadOrders:function(){var t,e=this;null!==(t=this.subscription)&&void 0!==t&&t.id&&(this.isLoading=!0,this.orderRepository.search(this.orderCriteria).then((function(t){var r;e.orders=t,e.total=null!==(r=t.total)&&void 0!==r?r:t.length,e.total>0&&e.orders.length<=0&&(e.page=1===e.page?1:e.page-1,e.loadProducts())})).catch((function(){e.orders=null})).finally((function(){e.isLoading=!1})))},onChangeTerm:function(t){this.term=t,t&&(this.page=1),this.loadOrders()},onChangePage:function(t){this.page=t.page,this.limit=t.limit,this.loadOrders()}}})}}]);