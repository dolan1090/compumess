(this["webpackJsonpPluginwebhook-flow-action"]=this["webpackJsonpPluginwebhook-flow-action"]||[]).push([[2],{P8hj:function(e,t,o){"use strict";function n(e,t){for(var o=[],n={},i=0;i<t.length;i++){var a=t[i],s=a[0],l={id:e+":"+i,css:a[1],media:a[2],sourceMap:a[3]};n[s]?n[s].parts.push(l):o.push(n[s]={id:s,parts:[l]})}return o}o.r(t),o.d(t,"default",(function(){return g}));var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var a={},s=i&&(document.head||document.getElementsByTagName("head")[0]),l=null,r=0,c=!1,d=function(){},u=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function g(e,t,o,i){c=o,u=i||{};var s=n(e,t);return w(s),function(t){for(var o=[],i=0;i<s.length;i++){var l=s[i];(r=a[l.id]).refs--,o.push(r)}t?w(s=n(e,t)):s=[];for(i=0;i<o.length;i++){var r;if(0===(r=o[i]).refs){for(var c=0;c<r.parts.length;c++)r.parts[c]();delete a[r.id]}}}}function w(e){for(var t=0;t<e.length;t++){var o=e[t],n=a[o.id];if(n){n.refs++;for(var i=0;i<n.parts.length;i++)n.parts[i](o.parts[i]);for(;i<o.parts.length;i++)n.parts.push(m(o.parts[i]));n.parts.length>o.parts.length&&(n.parts.length=o.parts.length)}else{var s=[];for(i=0;i<o.parts.length;i++)s.push(m(o.parts[i]));a[o.id]={id:o.id,refs:1,parts:s}}}}function h(){var e=document.createElement("style");return e.type="text/css",s.appendChild(e),e}function m(e){var t,o,n=document.querySelector("style["+p+'~="'+e.id+'"]');if(n){if(c)return d;n.parentNode.removeChild(n)}if(f){var i=r++;n=l||(l=h()),t=v.bind(null,n,i,!1),o=v.bind(null,n,i,!0)}else n=h(),t=k.bind(null,n),o=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else o()}}var b,y=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function v(e,t,o,n){var i=o?"":n.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var a=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function k(e,t){var o=t.css,n=t.media,i=t.sourceMap;if(n&&e.setAttribute("media",n),u.ssrId&&e.setAttribute(p,t.id),i&&(o+="\n/*# sourceURL="+i.sources[0]+" */",o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}},YES2:function(e,t,o){},q6mK:function(e,t,o){"use strict";o.r(t);o("wKQe");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){s(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var i=o.call(e,t||"default");if("object"!==n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var l=Shopware,r=l.Mixin,c=l.Application,d=l.Service,u=l.Component.getComponentHelper().mapState,p=Shopware.Data.Criteria;t.default={template:'<div class="sw-flow-call-webhook-log">\n    <sw-card\n        position-identifier=""\n        class="sw-flow-call-webhook-log__card"\n        :title="$tc(\'sw-flow-call-webhook.labelWebhookLog\')"\n        :is-loading="isLoading"\n    >\n        <template #grid>\n            <sw-container rows="auto 400px">\n                <sw-card-section secondary>\n                    <sw-container columns="1fr 1fr 150px" gap="14px">\n                        <sw-datepicker\n                            v-model="fromDate"\n                            class="sw-flow-call-webhook-log__from-date"\n                            dateType="datetime"\n                            size="medium"\n                            :label="$tc(\'sw-flow-call-webhook.log.list.labelFrom\')"\n                        />\n\n                        <sw-datepicker\n                            v-model="toDate"\n                            class="sw-flow-call-webhook-log__to-date"\n                            dateType="datetime"\n                            size="medium"\n                            :label="$tc(\'sw-flow-call-webhook.log.list.labelTo\')"\n                        />\n\n                        <sw-select-field\n                            v-model="selectedStatus"\n                            class="sw-flow-call-webhook-log__status-select"\n                            size="medium"\n                            :label="$tc(\'sw-flow-call-webhook.log.list.labelStatus\')"\n                            :options="statusOptions"\n                            :placeholder="$tc(\'sw-flow-call-webhook.log.list.placeholderStatus\')"\n                        />\n                    </sw-container>\n                </sw-card-section>\n\n                <sw-card-section divider="top">\n                    <sw-entity-listing\n                        :data-source="webhookLogs"\n                        :columns="logColumns"\n                        :show-settings="false"\n                        :show-actions="true"\n                        :sort-by="sortBy"\n                        :sort-direction="sortDirection"\n                        :is-loading="isLoading || isWebhookLogLoading"\n                        :show-selection="false"\n                        :repository="webhookLogRepository"\n                    >\n                        <template #column-createdAt="{ item }">\n                            {{ item.createdAt | date({ hour: \'2-digit\', minute: \'2-digit\' }) }}\n                        </template>\n\n                        <template #column-deliveryStatus="{ item }">\n                            <sw-label\n                                appearance="pill"\n                                :variant="getLabelVariant(item)"\n                            >\n                                {{ getLabelStatus(item) }}\n                            </sw-label>\n                        </template>\n\n                        <template #pagination>\n                            <sw-pagination\n                                :page="page"\n                                :limit="limit"\n                                :total="total"\n                                :total-visible="7"\n                                @page-change="onPageChange"\n                            />\n                        </template>\n\n                        <template #actions="{ item }">\n                            <sw-context-menu-item @click="showInfoModal(item)">\n                                {{ $tc(\'sw-flow-call-webhook.log.list.actionShowInfo\') }}\n                            </sw-context-menu-item>\n                        </template>\n                    </sw-entity-listing>\n\n                    <sw-empty-state\n                        v-if="!total && !isWebhookLogLoading"\n                        class="sw-flow-call-webhook-log__empty-state"\n                        :show-description="false"\n                        :title="$tc(\'sw-flow-call-webhook.log.list.emptyStateTitle\')"\n                    >\n                        <template #icon>\n                            <img\n                                :alt="$tc(\'sw-flow-call-webhook.log.list.emptyStateTitle\')"\n                                :src="\'/administration/static/img/empty-states/settings-empty-state.svg\' | asset"\n                            >\n                        </template>\n                    </sw-empty-state>\n                </sw-card-section>\n            </sw-container>\n\n            <sw-flow-call-webhook-log-detail-modal\n                v-if="displayedLog !== null"\n                :log-entry="displayedLog"\n                @close="closeInfoModal"\n            />\n        </template>\n    </sw-card>\n</div>\n',inject:["repositoryFactory"],mixins:[r.getByName("listing"),r.getByName("placeholder"),"notification"],props:{isLoading:{type:Boolean,required:!1,default:!1}},data:function(){return{isWebhookLogLoading:!1,sortBy:"createdAt",sortDirection:"DESC",disableRouteParams:!0,webhookLogs:[],displayedLog:null,fromDate:"",toDate:"",selectedStatus:"",statusOptions:[{id:"success",name:this.$tc("sw-flow-call-webhook.log.list.labelSuccess")},{id:"failed",name:this.$tc("sw-flow-call-webhook.log.list.labelFailed")}]}},computed:a(a({},u("swFlowState",["flow"])),{},{webhookLogRepository:function(){return this.repositoryFactory.create("webhook_event_log")},logColumns:function(){return this.getLogColumns()},reloadProperties:function(){return{isLoading:this.isLoading,toDate:this.toDate,fromDate:this.fromDate,selectedStatus:this.selectedStatus}},webhookLogCriteria:function(){var e=new p(this.page,this.limit);return e.addSorting(p.sort(this.sortBy,this.sortDirection)),e.addFilter(p.equals("flowSequences.flowId",this.flow.id)),this.fromDate&&e.addFilter(p.range("createdAt",{gte:this.fromDate})),this.toDate&&e.addFilter(p.range("createdAt",{lte:this.toDate})),this.selectedStatus&&e.addFilter(p.equals("deliveryStatus",this.selectedStatus)),e}}),watch:{reloadProperties:function(){this.getList()}},methods:{getLicense:function(e){return Shopware.License.get(e)},getList:function(){var e=this;if(!this.isLoading){if(!this.getLicense("FLOW_BUILDER-4884308"))return this.isWebhookLogLoading=!0,this.webhookLogRepository.search(this.webhookLogCriteria).then((function(t){e.total=t.total,e.webhookLogs=t})).catch((function(){e.createNotificationError({message:e.$tc("sw-flow-call-webhook.log.list.fetchErrorMessage")})})).finally((function(){e.isWebhookLogLoading=!1}));c.getContainer("init").httpClient.get("api/_info/config",{headers:{Accept:"application/vnd.api+json",Authorization:"Bearer ".concat(d("loginService").getToken()),"Content-Type":"application/json","sw-license-toggle":"FLOW_BUILDER-4884308"}})}},showInfoModal:function(e){this.displayedLog=e},closeInfoModal:function(){this.displayedLog=null},getLogColumns:function(){return[{property:"createdAt",dataIndex:"createdAt",label:"sw-flow-call-webhook.log.list.columnDate",allowResize:!0,primary:!0},{property:"webhookName",dataIndex:"webhookName",label:"sw-flow-call-webhook.log.list.columnName",allowResize:!0},{property:"deliveryStatus",dataIndex:"deliveryStatus",label:"sw-flow-call-webhook.log.list.columnStatus",allowResize:!0}]},getLabelVariant:function(e){return"success"===e.deliveryStatus?"success":"danger"},getLabelStatus:function(e){return"success"===e.deliveryStatus?this.$tc("sw-flow-call-webhook.log.list.labelSuccess"):this.$tc("sw-flow-call-webhook.log.list.labelFailed")}}}},wKQe:function(e,t,o){var n=o("YES2");n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,o("P8hj").default)("5d55a2ca",n,!0,{})}}]);