(this["webpackJsonpPluginwebhook-flow-action"]=this["webpackJsonpPluginwebhook-flow-action"]||[]).push([[1],{P8hj:function(e,t,n){"use strict";function o(e,t){for(var n=[],o={},a=0;a<t.length;a++){var r=t[a],l=r[0],i={id:e+":"+a,css:r[1],media:r[2],sourceMap:r[3]};o[l]?o[l].parts.push(i):n.push(o[l]={id:l,parts:[i]})}return n}n.r(t),n.d(t,"default",(function(){return w}));var a="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!a)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},l=a&&(document.head||document.getElementsByTagName("head")[0]),i=null,s=0,c=!1,d=function(){},f=null,u="data-vue-ssr-id",h="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function w(e,t,n,a){c=n,f=a||{};var l=o(e,t);return m(l),function(t){for(var n=[],a=0;a<l.length;a++){var i=l[a];(s=r[i.id]).refs--,n.push(s)}t?m(l=o(e,t)):l=[];for(a=0;a<n.length;a++){var s;if(0===(s=n[a]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete r[s.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],o=r[n.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](n.parts[a]);for(;a<n.parts.length;a++)o.parts.push(b(n.parts[a]));o.parts.length>n.parts.length&&(o.parts.length=n.parts.length)}else{var l=[];for(a=0;a<n.parts.length;a++)l.push(b(n.parts[a]));r[n.id]={id:n.id,refs:1,parts:l}}}}function p(){var e=document.createElement("style");return e.type="text/css",l.appendChild(e),e}function b(e){var t,n,o=document.querySelector("style["+u+'~="'+e.id+'"]');if(o){if(c)return d;o.parentNode.removeChild(o)}if(h){var a=s++;o=i||(i=p()),t=g.bind(null,o,a,!1),n=g.bind(null,o,a,!0)}else o=p(),t=k.bind(null,o),n=function(){o.parentNode.removeChild(o)};return t(e),function(o){if(o){if(o.css===e.css&&o.media===e.media&&o.sourceMap===e.sourceMap)return;t(e=o)}else n()}}var y,v=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function g(e,t,n,o){var a=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=v(t,a);else{var r=document.createTextNode(a),l=e.childNodes;l[t]&&e.removeChild(l[t]),l.length?e.insertBefore(r,l[t]):e.appendChild(r)}}function k(e,t){var n=t.css,o=t.media,a=t.sourceMap;if(o&&e.setAttribute("media",o),f.ssrId&&e.setAttribute(u,t.id),a&&(n+="\n/*# sourceURL="+a.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},"Y+tq":function(e,t,n){},iwg8:function(e,t,n){"use strict";n.r(t);n("pLvi");var o=["GET","POST","PUT","PATCH","DELETE"],a=["none","raw","x-www-form-urlencoded"];function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,l,i=[],s=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=r.call(n)).done)&&(i.push(o.value),i.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=Shopware,w=h.EntityDefinition,m=h.State,p=Shopware.Classes.ShopwareError,b=Shopware.Utils.types.isEmpty,y=Shopware.Utils.string.snakeCase;t.default={template:'<sw-modal\n    class="sw-flow-call-webhook-modal"\n    :title="$tc(\'sw-flow-call-webhook.modal.titleCallUrl\')"\n    @modal-close="onClose"\n>\n    <sw-tabs\n        default-item="general"\n        position-identifier="sw-flow-call-webhook"\n    >\n        <template #default="{ active }">\n            <sw-tabs-item\n                class="sw-flow-call-webhook-modal__tab-general"\n                name="general"\n                :active-tab="active"\n            >\n                {{ $tc(\'sw-flow-call-webhook.modal.tabGeneral\') }}\n            </sw-tabs-item>\n\n            <sw-tabs-item\n                class="sw-flow-call-webhook-modal__tab-header"\n                name="header"\n                :active-tab="active"\n            >\n                {{ $tc(\'sw-flow-call-webhook.modal.tabHeader\') }}\n            </sw-tabs-item>\n\n            <sw-tabs-item\n                v-if="showTabBody"\n                class="sw-flow-call-webhook-modal__tab-body"\n                name="body"\n                :active-tab="active"\n            >\n                {{ $tc(\'sw-flow-call-webhook.modal.tabBody\') }}\n            </sw-tabs-item>\n\n            <sw-tabs-item\n                class="sw-flow-call-webhook-modal__tab-auth"\n                name="basicAuth"\n                :active-tab="active"\n            >\n                {{ $tc(\'sw-flow-call-webhook.modal.tabBasicAuth\') }}\n            </sw-tabs-item>\n        </template>\n\n        <template #content="{ active }">\n            <template v-if="active === \'general\'">\n                <sw-select-field\n                    v-model="config.method"\n                    class="sw-flow-call-webhook-modal__method-select"\n                    :label="$tc(\'sw-flow-call-webhook.modal.general.labelMethod\')"\n                >\n                    <option\n                        v-for="option in methodOptions"\n                        :key="option"\n                        :value="option"\n                    >\n                        {{ option }}\n                    </option>\n                </sw-select-field>\n\n                <sw-url-field\n                    v-model="config.baseUrl"\n                    required\n                    class="sw-flow-call-webhook-modal__base-url"\n                    :label="$tc(\'sw-flow-call-webhook.modal.general.labelBaseUrl\')"\n                    :placeholder="$tc(\'sw-flow-call-webhook.modal.general.placeholderBaseUrl\')"\n                    :error="error.baseUrl"\n                />\n\n                <sw-textarea-field\n                    v-model="config.description"\n                    class="sw-flow-call-webhook-modal__description"\n                    :label="$tc(\'sw-flow-call-webhook.modal.general.labelDescription\')"\n                    :placeholder="$tc(\'sw-flow-call-webhook.modal.general.placeholderDescription\')"\n                />\n\n                <h3\n                    class="sw-flow-call-webhook-modal__title-parameters"\n                >\n                    {{ $tc(\'sw-flow-call-webhook.modal.general.titleParameters\') }}\n                </h3>\n\n                <sw-flow-call-webhook-parameter-grid\n                    v-model="query"\n                    class="sw-flow-call-webhook-modal__query-grid"\n                    :data-selection="dataSelection"\n                />\n\n                <sw-text-field\n                    v-model="testUrl"\n                    class="sw-flow-call-webhook-modal__url-preview"\n                    disabled\n                    :label="$tc(\'sw-flow-call-webhook.modal.general.labelUrlPreview\')"\n                />\n            </template>\n\n            <template v-if="active === \'header\'">\n                <sw-flow-call-webhook-parameter-grid\n                    v-model="headers"\n                    class="sw-flow-call-webhook-modal__header-grid"\n                    :data-selection="dataSelection"\n                />\n            </template>\n\n            <template v-if="active === \'body\'">\n                <sw-select-field\n                    v-model="bodyType"\n                    class="sw-flow-call-webhook-modal__body-type"\n                    :label="$tc(\'sw-flow-call-webhook.modal.body.labelBodyType\')"\n                >\n                    <option\n                        v-for="option in bodyOptions"\n                        :key="option"\n                        :value="option"\n                    >\n                        {{ option }}\n                    </option>\n                </sw-select-field>\n\n                <sw-code-editor\n                    v-if="bodyType === \'raw\'"\n                    v-model="config.options.body"\n                    class="sw-flow-call-webhook-modal__body-editor"\n                    :label="$tc(\'sw-flow-call-webhook.modal.body.labelCode\')"\n                />\n\n                <sw-flow-call-webhook-parameter-grid\n                    v-if="bodyType === \'x-www-form-urlencoded\'"\n                    v-model="formParams"\n                    class="sw-flow-call-webhook-modal__body-grid"\n                    :data-selection="dataSelection"\n                />\n            </template>\n\n            <template v-if="active === \'basicAuth\'">\n                <sw-switch-field\n                    v-model="config.authActive"\n                    class="sw-flow-call-webhook-modal__active-switch"\n                    :label="$tc(\'sw-flow-call-webhook.modal.basicAuth.labelActive\')"\n                />\n\n                <sw-container\n                    columns="1fr 1fr"\n                    gap="32px"\n                >\n                    <sw-text-field\n                        v-model="config.options.auth[0]"\n                        class="sw-flow-call-webhook-modal__username"\n                        :label="$tc(\'sw-flow-call-webhook.modal.basicAuth.labelUsername\')"\n                        :placeholder="$tc(\'sw-flow-call-webhook.modal.basicAuth.placeholderUsername\')"\n                        :error="error.username"\n                    />\n\n                    <sw-password-field\n                        v-model="config.options.auth[1]"\n                        class="sw-flow-call-webhook-modal__password"\n                        :label="$tc(\'sw-flow-call-webhook.modal.basicAuth.labelPassword\')"\n                        :placeholder="$tc(\'sw-flow-call-webhook.modal.basicAuth.placeholderPassword\')"\n                        :error="error.password"\n                    />\n                </sw-container>\n            </template>\n        </template>\n    </sw-tabs>\n\n    <template #modal-footer>\n        <sw-button\n            class="sw-flow-call-webhook-modal__cancel-button"\n            size="small"\n            @click="onClose"\n        >\n            {{ $tc(\'global.default.cancel\') }}\n        </sw-button>\n\n        <sw-button\n            class="sw-flow-call-webhook-modal__save-button"\n            variant="primary"\n            size="small"\n            @click="onAddAction"\n        >\n            {{ sequence.id\n            ? $tc(\'sw-flow-call-webhook.modal.buttonSaveAction\')\n            : $tc(\'sw-flow-call-webhook.modal.buttonAddAction\') }}\n        </sw-button>\n    </template>\n</sw-modal>\n',props:{sequence:{type:Object,required:!0,default:{}}},data:function(){return{config:{description:"",baseUrl:"",method:"GET",authActive:!1,options:{auth:[],query:{},headers:{},body:"",form_params:{}}},error:{},bodyType:"none",methodOptions:o,bodyOptions:a,headers:[],query:[],formParams:[]}},computed:{triggerEvent:function(){return m.get("swFlowState").triggerEvent},dataSelection:function(){return this.getEntityProperty(this.triggerEvent.data)},testUrl:function(){var e="";return this.query.forEach((function(t,n){t.name&&t.data&&(e+=0===n?"?":"&",e+=t.isCustomData?"".concat(t.name,"=").concat(t.data):"".concat(t.name,"={{").concat(t.data,"}}"))})),"".concat(this.config.baseUrl).concat(e)},showTabBody:function(){return["POST","PUT","PATCH"].includes(this.config.method)}},watch:{config:{handler:function(e){e.baseUrl&&this.$delete(this.error,"baseUrl"),e.options.auth[0]&&this.$delete(this.error,"username"),e.options.auth[1]&&this.$delete(this.error,"password")},deep:!0}},created:function(){this.createdComponent()},methods:{createdComponent:function(){var e,t,n,o,a,r;this.config=null!==(e=this.sequence)&&void 0!==e&&e.config?f({},null===(t=this.sequence)||void 0===t?void 0:t.config):this.config,this.query=this.generateParams(this.config.options.query),this.headers=this.generateParams(this.config.options.headers),this.formParams=this.generateParams(this.config.options.form_params),null!==(n=this.config)&&void 0!==n&&null!==(o=n.options)&&void 0!==o&&o.body?this.bodyType="raw":b(null===(a=this.config)||void 0===a||null===(r=a.options)||void 0===r?void 0:r.form_params)?this.bodyType="none":this.bodyType="x-www-form-urlencoded"},getEntityProperty:function(e){var t=this,n=[];return Object.keys(e).forEach((function(t){"entity"===e[t].type&&n.push(t)})),n.reduce((function(e,n){var o=t.convertCamelCaseToSnakeCase(n),a=w.get(o).filterProperties((function(e){return w.getScalarTypes().includes(e.type)}));return e.concat(Object.keys(a).map((function(e){return{value:"".concat(n,".").concat(e)}})))}),[])},onClose:function(){this.$emit("modal-close")},onAddAction:function(){if(this.checkError(),b(this.error)){"none"===this.bodyType||"GET"===this.config.method?(this.$delete(this.config.options,"form_params"),this.$delete(this.config.options,"body")):"raw"===this.bodyType?this.$delete(this.config.options,"form_params"):"x-www-form-urlencoded"===this.bodyType&&(this.$delete(this.config.options,"body"),this.config.options.form_params=this.convertParams(this.formParams)),this.config.options.query=this.convertParams(this.query),this.config.options.headers=this.convertParams(this.headers);var e=f(f({},this.sequence),{},{config:this.config});this.$emit("process-finish",e)}},isExistData:function(e){return this.dataSelection.find((function(t){return e===t.value}))},generateParams:function(e){var t=this;if(b(e))return[{name:"",data:""}];var n=Object.entries(e).map((function(e){var n=i(e,2),o=n[0],a=n[1],r=a.replace(/{{|}}/g,""),l=!t.isExistData(r);return{name:o,data:l?a:r,isCustomData:l}}));return[].concat(l(n),[{data:"",name:""}])},convertParams:function(e){var t={};return e.forEach((function(e){e.name&&(e.isCustomData?t[e.name]=e.data:t[e.name]=e.data?"{{".concat(e.data,"}}"):"")})),t},convertCamelCaseToSnakeCase:function(e){return y(e)},checkError:function(){var e=new p({code:"c1051bb4-d103-4f74-8988-acbcafc7fdc3"});if(this.config.baseUrl||this.$set(this.error,"baseUrl",e),this.config.authActive){var t=this.config.options.auth;t[0]&&t[1]||(t[0]||this.$set(this.error,"username",e),t[1]||this.$set(this.error,"password",e))}}}}},pLvi:function(e,t,n){var o=n("Y+tq");o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);(0,n("P8hj").default)("49a9fb2d",o,!0,{})}}]);