(this["webpackJsonpPluginemployee-management"]=this["webpackJsonpPluginemployee-management"]||[]).push([[2],{P8hj:function(e,n,s){"use strict";function i(e,n){for(var s=[],i={},t=0;t<n.length;t++){var r=n[t],o=r[0],a={id:e+":"+t,css:r[1],media:r[2],sourceMap:r[3]};i[o]?i[o].parts.push(a):s.push(i[o]={id:o,parts:[a]})}return s}s.r(n),s.d(n,"default",(function(){return f}));var t="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!t)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},o=t&&(document.head||document.getElementsByTagName("head")[0]),a=null,c=0,l=!1,u=function(){},p=null,m="data-vue-ssr-id",d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,n,s,t){l=s,p=t||{};var o=i(e,n);return h(o),function(n){for(var s=[],t=0;t<o.length;t++){var a=o[t];(c=r[a.id]).refs--,s.push(c)}n?h(o=i(e,n)):o=[];for(t=0;t<s.length;t++){var c;if(0===(c=s[t]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete r[c.id]}}}}function h(e){for(var n=0;n<e.length;n++){var s=e[n],i=r[s.id];if(i){i.refs++;for(var t=0;t<i.parts.length;t++)i.parts[t](s.parts[t]);for(;t<s.parts.length;t++)i.parts.push(g(s.parts[t]));i.parts.length>s.parts.length&&(i.parts.length=s.parts.length)}else{var o=[];for(t=0;t<s.parts.length;t++)o.push(g(s.parts[t]));r[s.id]={id:s.id,refs:1,parts:o}}}}function v(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function g(e){var n,s,i=document.querySelector("style["+m+'~="'+e.id+'"]');if(i){if(l)return u;i.parentNode.removeChild(i)}if(d){var t=c++;i=a||(a=v()),n=w.bind(null,i,t,!1),s=w.bind(null,i,t,!0)}else i=v(),n=k.bind(null,i),s=function(){i.parentNode.removeChild(i)};return n(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;n(e=i)}else s()}}var y,b=(y=[],function(e,n){return y[e]=n,y.filter(Boolean).join("\n")});function w(e,n,s,i){var t=s?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(n,t);else{var r=document.createTextNode(t),o=e.childNodes;o[n]&&e.removeChild(o[n]),o.length?e.insertBefore(r,o[n]):e.appendChild(r)}}function k(e,n){var s=n.css,i=n.media,t=n.sourceMap;if(i&&e.setAttribute("media",i),p.ssrId&&e.setAttribute(m,n.id),t&&(s+="\n/*# sourceURL="+t.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"),e.styleSheet)e.styleSheet.cssText=s;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(s))}}},PQdn:function(e,n,s){var i=s("ZzSm");i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,s("P8hj").default)("4ae3aa22",i,!0,{})},ZzSm:function(e,n,s){},aHXb:function(e,n,s){"use strict";s.r(n);s("PQdn");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function r(e,n,s){return(n=o(n))in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function o(e){var n=function(e,n){if("object"!==i(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var t=s.call(e,n||"default");if("object"!==i(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===i(n)?n:String(n)}var a=function(){function e(n){var s=n.permissions,i=n.selected;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"permissions",[]),r(this,"selected",[]),this.permissions=s,this.selected=i}var n,s,i;return n=e,(s=[{key:"updateState",value:function(e){var n=e.permissions,s=void 0===n?null:n,i=e.selected,t=void 0===i?null:i;s&&(this.permissions=s),t&&(this.selected=t)}},{key:"getPermissions",value:function(){return this.permissions}},{key:"getSelected",value:function(){return this.selected}},{key:"unselect",value:function(e){var n=this.getPermissionNames(e),s=this.getPermissionsByName(this.selected,this.permissions),i=this.findDependencies(n,s,(function(e,n){return n.permissionDependencies.includes(e.permissionName)}));this.selected=this.selected.filter((function(e){return!i.includes(e)}))}},{key:"select",value:function(e){var n=this.getPermissionNames(e),s=this.findDependencies(n,this.permissions,(function(e,n){return e.permissionDependencies.includes(n.permissionName)}));this.selected=this.getUniquePermissionNames(this.selected,n,s)}},{key:"getPermissionTree",value:function(){var e={};return this.permissions.forEach((function(n){var s=n.permissionGroupName;e[s]||(e[s]=[]),e[s].push(n)})),e}},{key:"isGroupSelected",value:function(e){var n=this;return this.getPermissionNames(e).every((function(e){return n.selected.includes(e)}))}},{key:"isGroupPartialSelected",value:function(e){var n=this;return this.getPermissionNames(e).some((function(e){return n.selected.includes(e)}))}},{key:"isSelected",value:function(e){return this.selected.includes(e)}},{key:"isEverythingSelected",value:function(){return this.selected.length===this.permissions.length&&this.permissions.length>0}},{key:"findDependencies",value:function(e,n,s){var i=this,t=new Set,r=new Set,o=function e(o){var a=i.getPermissionsByName([o],n)[0];r.has(o)||(r.add(o),n.forEach((function(n){s(a,n)&&(t.add(n.permissionName),e(n.permissionName))})))};return e.forEach((function(e){o(e)})),this.getUniquePermissionNames(e,t)}},{key:"getPermissionsByName",value:function(e,n){return n.filter((function(n){return e.includes(n.permissionName)}))}},{key:"getPermissionNames",value:function(e){return Object.values(e).map((function(e){return e.permissionName}))}},{key:"getUniquePermissionNames",value:function(){for(var e=new Set,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return s.forEach((function(n){n.forEach((function(n){return e.add(n)}))})),Array.from(e)}}])&&t(n.prototype,s),i&&t(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}(),c=Shopware.Component;n.default=c.wrapComponentConfig({template:'{% block sw_permission_tree %}\n    <div class="sw-permission-tree">\n        {% block sw_permission_tree_all_checkbox %}\n            <sw-checkbox-field\n                class="sw-permission-tree__switch-all"\n                :label="$tc(\'sw-customer.role.create.permissions.tree.switchAllLabel\')"\n                :value="permissionTree.isEverythingSelected()"\n                :partly-checked="permissionTree.isGroupPartialSelected(permissions)"\n                @change="(event) => onChange(event, permissions)"\n            ></sw-checkbox-field>\n        {% endblock %}\n\n        {% block sw_permission_tree_content %}\n            <template v-for="(permissionArray, groupName, index) in tree">\n                <div :key="groupName">\n                    {% block sw_permission_tree_content_group %}\n                        <hr class="sw-permission-tree__group-divider" v-if="index < permissions.length - 1">\n\n                        <div\n                            class="sw-permission-tree__group"\n                            :class="`sw-permission-group__${groupName}`"\n                        >\n                            {% block sw_permission_tree_content_group_checkbox %}\n                                <sw-checkbox-field\n                                    class="sw-permission-tree__group-switch"\n                                    :label="getPermissionGroupLabel(groupName)"\n                                    :value="permissionTree.isGroupSelected(permissionArray)"\n                                    :partly-checked="permissionTree.isGroupPartialSelected(permissionArray)"\n                                    @change="(event) => onChange(event, permissionArray)"\n                                ></sw-checkbox-field>\n                            {% endblock %}\n\n                            {% block sw_permission_tree_content_group_permissions %}\n                                <template v-for="permission in permissionArray">\n                                    <sw-checkbox-field\n                                        :key="permission.permissionName"\n                                        class="sw-permission-tree__group-permission-switch"\n                                        :class="getPermissionClass(permission.permissionName)"\n                                        :value="permissionTree.isSelected(permission.permissionName)"\n                                        @change="(event) => onChange(event, [permission])"\n                                    >\n                                        <template #label>\n                                            <span v-tooltip="getDependenciesTooltip(permission.permissionDependencies)">\n                                                {{ getPermissionLabel(permission.permissionName) }}\n                                            </span>\n                                        </template>\n                                    </sw-checkbox-field>\n                                </template>\n                            {% endblock %}\n                        </div>\n                    {% endblock %}\n                </div>\n            </template>\n        {% endblock %}\n    </div>\n{% endblock %}\n',props:{permissions:{type:Array,required:!0},preSelectedPermissions:{type:Array,required:!0}},data:function(){return{selected:[],permissionTree:new a({permissions:this.permissions,selected:this.preSelectedPermissions})}},watch:{combinedPermissions:{immediate:!0,handler:function(e){this.permissionTree.updateState(e),this.$forceUpdate()}}},computed:{tree:function(){return this.permissionTree.getPermissionTree()},combinedPermissions:function(){return{selected:this.preSelectedPermissions,permissions:this.permissions}}},methods:{onChange:function(e,n){e?this.permissionTree.select(n):this.permissionTree.unselect(n),this.$emit("change-permissions",this.permissionTree.getSelected())},getPermissionGroupLabel:function(e){return this.$tc("sw-customer.role.create.permissions.tree.groups.".concat(this.$sanitize(e)))},getPermissionLabel:function(e){return this.$tc("sw-customer.role.create.permissions.tree.permissions.".concat(this.$sanitize(e)))},getPermissionClass:function(e){return"sw-permission-switch__".concat(e.replace(/\./g,"-"))},getDependenciesTooltip:function(e){var n=this;if(0===e.length)return{message:"",disabled:!0};var s=e.map((function(e){return'<li style="margin-left: 15px">'.concat(n.getPermissionLabel(e),"</li>")})).join("");return{message:"<p>".concat(this.$tc("sw-customer.role.create.permissions.tooltipDependenciesTitle"),"</p><ul>").concat(s,"</ul>"),disabled:!1,width:220}}}})}}]);