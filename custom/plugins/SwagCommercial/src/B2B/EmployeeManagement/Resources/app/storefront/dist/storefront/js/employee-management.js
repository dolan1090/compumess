"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["employee-management"],{2818:(e,t,i)=>{var n,r,s,o=i(6285),a=i(8254),c=i(4690),l=i(3206);class d extends o.Z{init(){this.el.addEventListener("show.bs.modal",this._showModalEventListener.bind(this));l.Z.querySelector(this.el,`#${this.options.confirmButtonId}`).addEventListener("click",this._deleteEmployee.bind(this))}_showModalEventListener(e){this.deleteAction=e.relatedTarget.dataset.deleteAction,this.contentSnippet=e.relatedTarget.dataset.contentSnippet;if(!(this.deleteAction&&this.contentSnippet))throw new DOMException("Failed to update content. Required data attributes are missing.");const t=l.Z.querySelector(e.target,`#${this.options.contentId}`);t.classList.remove("text-center"),t.innerHTML=this.contentSnippet}_deleteEmployee(){c.Z.create(this.el);(new a.Z).delete(this.deleteAction,null,(()=>{location.reload()}))}}n=d,s={contentId:null,confirmButtonId:null},(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(r="options"))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s;class h extends o.Z{init(){this.client=new a.Z,this.el.addEventListener("show.bs.modal",(e=>this._onModalShow(e)));l.Z.querySelector(this.el,`#${this.options.confirmButtonId}`).addEventListener("click",this._deactivateEmployee.bind(this))}_onModalShow(e){const t=e.relatedTarget.dataset,i=JSON.parse(t.employee),n=[t.deactivateAction,t.contentSnippet,i.firstName,i.lastName].every((e=>e));if(!n)throw new DOMException("Failed to update modal content. Required data attributes are missing.");this.deactivateAction=t.deactivateAction;const r=l.Z.querySelector(e.target,`#${this.options.contentId}`);r.classList.remove("text-center"),r.innerHTML=t.contentSnippet,this.employee=i}_deactivateEmployee(){c.Z.create(this.el);const e=new URL(location.href);e.searchParams.set("deactivate","true"),e.searchParams.set("firstName",this.employee.firstName),e.searchParams.set("lastName",this.employee.lastName),this.client.get(this.deactivateAction,(()=>{location.assign(e.toString())}))}}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(h,"options",{contentId:null,confirmButtonId:null});class u extends o.Z{init(){this._updateAllGroupCheckedStates(),this._addEventListeners()}_updateAllGroupCheckedStates(){l.Z.querySelectorAll(this.el,this.options.permissionGroupSelector).forEach((e=>{const t=this._getPermissionsOfGroup(e.value);this._updateGroupChecked(e,t)}))}_addEventListeners(){l.Z.querySelectorAll(this.el,this.options.permissionGroupSelector).forEach((e=>{e.addEventListener("change",this._handlePermissionGroupChange.bind(this))}));l.Z.querySelectorAll(this.el,this.options.permissionSelector).forEach((e=>{e.addEventListener("change",this._handlePermissionChange.bind(this))}))}_handlePermissionGroupChange(e){const t=e.currentTarget,i=l.Z.querySelectorAll(this.el,this.options.permissionSelector);this._getPermissionsOfGroup(t.value).forEach((e=>{const n=e.checked;if(e.checked=t.checked,t.checked&&n!==e.checked){const t=JSON.parse(e.dataset.b2bPermissionDependencies)||[];this._makePermissionsCheckedNested(i,t)}})),t.checked||this._uncheckAllPermissionsMissingDependenciesNested(i),this._updateAllGroupCheckedStates()}_handlePermissionChange(e){const t=e.currentTarget,i=l.Z.querySelectorAll(this.el,this.options.permissionSelector);if(t.checked){const e=JSON.parse(t.dataset.b2bPermissionDependencies)||[];this._makePermissionsCheckedNested(i,e)}else this._uncheckAllPermissionsMissingDependenciesNested(i);this._updateAllGroupCheckedStates()}_makePermissionsCheckedNested(e,t){let i=t;for(;i.length>0;)e.forEach((e=>{const t=i.includes(e.value);if(!e.checked&&t){e.checked=!0,i=i.filter((t=>t!==e.value));const t=JSON.parse(e.dataset.b2bPermissionDependencies)||[];i.push(...t)}else t&&(i=i.filter((t=>t!==e.value)))}))}_uncheckAllPermissionsMissingDependenciesNested(e){let t=Array.from(e).flatMap((e=>e.checked?[e.value]:[])),i=!0;for(;i;)i=!1,e.forEach((e=>{if(!e.checked)return;(JSON.parse(e.dataset.b2bPermissionDependencies)||[]).some((e=>!t.includes(e)))&&(e.checked=!1,t=t.filter((t=>t!==e.value)),i=!0)}))}_updateGroupChecked(e,t){const i=Array.from(t).every((e=>e.checked)),n=Array.from(t).some((e=>e.checked));return i?(e.indeterminate=!1,void(e.checked=!0)):n?(e.indeterminate=!0,void(e.checked=!1)):(e.indeterminate=!1,void(e.checked=!1))}_getPermissionsOfGroup(e){return l.Z.querySelectorAll(this.el,`${this.options.permissionSelector}[data-b2b-permission-group="${e}"]`)}}function p(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}!function(e,t,i){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(u,"options",{permissionGroupSelector:null,permissionSelector:null});class m extends o.Z{constructor(...e){super(...e),p(this,"changeConfirmed",!1)}init(){l.Z.querySelector(this.el,`#${this.options.confirmButtonId}`).addEventListener("click",this._setChangeConfirmed.bind(this)),this.el.addEventListener("hidden.bs.modal",this._restore.bind(this))}_setChangeConfirmed(){this.changeConfirmed=!0}_restore(){if(this.changeConfirmed)return void(this.changeConfirmed=!1);const e=l.Z.querySelector(document,`#${this.options.defaultRoleSwitchId}`);if("checkbox"!==(null==e?void 0:e.type))throw new DOMException(`Target input is not a checkbox: "#${this.options.defaultRoleSwitchId}"`);e.checked=!1}}p(m,"options",{defaultRoleSwitchId:null,confirmButtonId:null});const f=window.PluginManager;f.register("B2bDeleter",d,"[data-b2b-deleter]"),f.register("B2bEmployeeDeactivator",h,"[data-b2b-employee-deactivator]"),f.register("B2bRolePermissionTree",u,"[data-b2b-role-permission-tree]"),f.register("B2bRestoreSwitch",m,"[data-b2b-restore-switch]")}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=2818,e(e.s=t);var t}));e.O()}]);